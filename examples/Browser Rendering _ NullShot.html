<!DOCTYPE html>
<!-- saved from url=(0063)https://test.nullshot.ai/en/docs/developers/platform/web-search -->
<html lang="en" class="__variable_bc0dcf __variable_d28b19 __variable_017788 __variable_2d00a0 __variable_7c1658 __variable_f2a38a __variable_5cfdac __variable_9a8899 light" style="color-scheme: light;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="./Browser Rendering _ NullShot_files/879b7432ada67782.css" data-precedence="next"><link rel="stylesheet" href="./Browser Rendering _ NullShot_files/a3a846aeba500629.css" data-precedence="next"><link rel="preload" as="script" fetchpriority="low" href="./Browser Rendering _ NullShot_files/webpack-a44c8f29bbec59fc.js"><script src="./Browser Rendering _ NullShot_files/4bd1b696-4fc4f479bfd38059.js" async=""></script><script src="./Browser Rendering _ NullShot_files/15964-3455ef04b16b020c.js" async=""></script><script src="./Browser Rendering _ NullShot_files/main-app-fe0efc24e47254af.js" async=""></script><script src="./Browser Rendering _ NullShot_files/7d384bb9-0ffedcc6b53f3e73.js" async=""></script><script src="./Browser Rendering _ NullShot_files/cd24890f-ec7b64c510add751.js" async=""></script><script src="./Browser Rendering _ NullShot_files/66766-93aa4a3d196b6d8b.js" async=""></script><script src="./Browser Rendering _ NullShot_files/6874-5100f18710e9cb3f.js" async=""></script><script src="./Browser Rendering _ NullShot_files/31928-70a661b25895e6e5.js" async=""></script><script src="./Browser Rendering _ NullShot_files/57875-6ef202f3cf7ed091.js" async=""></script><script src="./Browser Rendering _ NullShot_files/37742-88327bccd3a920a3.js" async=""></script><script src="./Browser Rendering _ NullShot_files/4228-aa6df1d124ddc104.js" async=""></script><script src="./Browser Rendering _ NullShot_files/21108-cc5726b6af4c34af.js" async=""></script><script src="./Browser Rendering _ NullShot_files/39526-1f72852a19518691.js" async=""></script><script src="./Browser Rendering _ NullShot_files/73317-ed887098e222ed78.js" async=""></script><script src="./Browser Rendering _ NullShot_files/68679-e7d59f5e228a6339.js" async=""></script><meta name="next-size-adjust" content=""><title>Browser Rendering | NullShot</title><meta name="description" content="Web scraping and content extraction using browser automation for agents"><meta name="application-name" content="NullShot"><meta name="author" content="NullShot Team"><link rel="manifest" href="https://test.nullshot.ai/manifest.json"><meta name="referrer" content="origin-when-cross-origin"><meta name="creator" content="NullShot"><meta name="publisher" content="NullShot"><meta name="robots" content="index, follow"><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"><meta name="category" content="Technology"><link rel="canonical" href="https://nullshot.ai/en/docs/developers/platform/web-search"><link rel="alternate" hreflang="en" href="https://nullshot.ai/en/docs/developers/platform/web-search"><meta property="og:title" content="Browser Rendering"><meta property="og:description" content="Web scraping and content extraction using browser automation for agents"><meta property="og:url" content="https://nullshot.ai/en/docs/developers/platform/web-search"><meta property="og:site_name" content="Platform Documentation"><meta property="og:locale" content="en"><meta property="og:image" content="https://nullshot.ai/images/og-image.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:image:alt" content="Browser Rendering"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Browser Rendering"><meta name="twitter:description" content="Web scraping and content extraction using browser automation for agents"><meta name="twitter:image" content="https://nullshot.ai/images/og-image.png"><link rel="icon" href="https://test.nullshot.ai/icon.svg?423bbdeb1a002565" type="image/svg+xml" sizes="any"><script src="./Browser Rendering _ NullShot_files/polyfills-42372ed130431b0a.js" nomodule=""></script><link rel="preload" href="https://test.nullshot.ai/_next/static/media/1dcb4bb6f2068eb9-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://test.nullshot.ai/_next/static/media/569ce4b8f30dc480-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://test.nullshot.ai/_next/static/media/5ed273b77d2a1951-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://test.nullshot.ai/_next/static/media/62a211a97b43f624-s.p.otf" as="font" crossorigin="" type="font/otf"><link rel="preload" href="https://test.nullshot.ai/_next/static/media/7cba1811e3c25a15-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://test.nullshot.ai/_next/static/media/93f479601ee12b01-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://test.nullshot.ai/_next/static/media/a67ad81cd994aeef-s.p.otf" as="font" crossorigin="" type="font/otf"><link rel="preload" href="https://test.nullshot.ai/_next/static/media/ab86f138d0d6e9da-s.p.woff2" as="font" crossorigin="" type="font/woff2"><link rel="preload" href="https://test.nullshot.ai/_next/static/media/c7f848bed9dd25a3-s.p.woff2" as="font" crossorigin="" type="font/woff2"></head><body class="antialiased bg-background font-sans" style="overflow: unset;"><div hidden=""><!--$--><!--/$--></div><!--$--><!--/$--><script type="text/javascript" crossorigin="anonymous" src="./Browser Rendering _ NullShot_files/config.js"></script><script type="text/javascript" crossorigin="anonymous" src="./Browser Rendering _ NullShot_files/exception-autocapture.js"></script><script type="text/javascript" crossorigin="anonymous" src="./Browser Rendering _ NullShot_files/web-vitals.js"></script><script type="text/javascript" crossorigin="anonymous" src="./Browser Rendering _ NullShot_files/recorder.js"></script><script>((a2, b2, c2, d2, e2, f2, g2, h2) => {
          let i2 = document.documentElement, j2 = ["light", "dark"];
          function k2(b3) {
            var c3;
            (Array.isArray(a2) ? a2 : [a2]).forEach((a3) => {
              let c4 = a3 === "class", d3 = c4 && f2 ? e2.map((a4) => f2[a4] || a4) : e2;
              c4 ? (i2.classList.remove(...d3), i2.classList.add(f2 && f2[b3] ? f2[b3] : b3)) : i2.setAttribute(a3, b3);
            }), c3 = b3, h2 && j2.includes(c3) && (i2.style.colorScheme = c3);
          }
          __name(k2, "k2");
          if (d2) k2(d2);
          else try {
            let a3 = localStorage.getItem(b2) || c2, d3 = g2 && a3 === "system" ? window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light" : a3;
            k2(d3);
          } catch {
          }
        })("class","theme","system",null,["light","dark"],null,true,true)</script><div class="relative flex min-h-screen flex-col"><div class="relative flex min-h-screen flex-col"><header class="fixed top-0 z-50 w-full" style="background:#222531;border-bottom:1px solid rgba(255, 255, 255, 0.12)"><div class="mx-auto px-4 sm:px-6 lg:px-8 max-w-[1440px]"><div class="hidden md:flex h-16 items-center justify-between px-[80px]"><div class="flex items-center gap-10"><a class="flex items-center gap-6" href="https://test.nullshot.ai/en"><div class="w-[131px] h-8 relative flex items-center justify-center"><img alt="Nullshot" loading="lazy" width="131" height="32" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/logo.svg"></div></a><nav class="flex items-center gap-4"><a class="group flex items-center gap-2 font-space-grotesk font-bold text-base transition-all duration-200 text-white/60 hover:text-white hover:nav-glow" href="https://test.nullshot.ai/exchange"><div class="transition-all duration-200 relative opacity-60 group-hover:opacity-100"><img alt="Exchange" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="object-contain" src="./Browser Rendering _ NullShot_files/exchange-icon.svg" style="color: transparent;"></div>Exchange</a><a class="group flex items-center gap-2 font-space-grotesk font-bold text-base transition-all duration-200 text-white/60 hover:text-white hover:nav-glow" href="https://test.nullshot.ai/playground"><div class="transition-all duration-200 relative opacity-60 group-hover:opacity-100"><img alt="Playground" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="object-contain" src="./Browser Rendering _ NullShot_files/playground-icon.svg" style="color: transparent;"></div>Playground</a><a class="group flex items-center gap-2 font-space-grotesk font-bold text-base transition-all duration-200 text-white/60 hover:text-white hover:nav-glow" href="https://test.nullshot.ai/brainstorm"><div class="transition-all duration-200 relative opacity-60 group-hover:opacity-100"><img alt="Brainstorm" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="object-contain" src="./Browser Rendering _ NullShot_files/brainstorm-icon.svg" style="color: transparent;"></div>Brainstorm</a></nav></div><div class="flex items-center gap-4"><a href="https://test.nullshot.ai/docs"><button class="justify-center whitespace-nowrap transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 disabled:!bg-[#1D1F29] disabled:!text-[rgba(255,255,255,0.2)] disabled:!border-[rgba(255,255,255,0.2)] h-10 px-4 py-2 rounded-xl font-bold text-base font-space-grotesk text-white/80 bg-transparent border border-white/20 hover:bg-white/10 hover:border-white/80 flex items-center gap-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-code h-4 w-4"><path d="M10 12.5 8 15l2 2.5"></path><path d="m14 12.5 2 2.5-2 2.5"></path><path d="M14 2v4a2 2 0 0 0 2 2h4"></path><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z"></path></svg>Developer Docs</button></a><button type="button" id="radix-_r_0_" aria-haspopup="menu" aria-expanded="false" data-state="closed" class="focus:outline-none"><span class="relative flex shrink-0 overflow-hidden h-10 w-10 border border-border rounded-xl"><img alt="raycoder" class="aspect-square h-full w-full object-cover rounded-[6px]" src="./Browser Rendering _ NullShot_files/12.png"></span></button></div></div><div class="flex md:hidden h-16 items-center justify-between px-4"><div class="w-8 h-8 flex items-center justify-center"><button class="focus:outline-none p-0 flex items-center justify-center"><span class="relative flex shrink-0 overflow-hidden h-8 w-8 border border-border rounded-[4px]"><img alt="raycoder" class="aspect-square h-full w-full object-cover rounded-[6px]" src="./Browser Rendering _ NullShot_files/12.png"></span></button></div><a class="flex items-center" href="https://test.nullshot.ai/en"><div class="w-[98px] h-6 relative flex items-center justify-center"><img alt="Nullshot" loading="lazy" width="98" height="24" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/logo.svg"></div></a><button class="p-1 flex items-center justify-center" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-_R_1pcnmjb_" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu h-5 w-5 text-white/80 stroke-2"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button></div></div></header><main class="flex-1"><div class="hidden md:flex h-screen bg-[#16171A] pt-16"><div class="w-64 border-r border-white/10 bg-[#16171A] flex-shrink-0 sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto scrollbar-hide"><div class="h-full flex flex-col justify-between"><div class="py-6 px-4 flex-1"><div class="space-y-6"><div class="space-y-3"><h3 class="text-h4-bold text-white/60 tracking-wider px-2 py-1 font-space-grotesk">Introduction</h3><div class="space-y-1 ml-2 mt-3"><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:default"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/introduction/overview">Overview</a></div></div><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:pointer"><div class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white">Concepts</div><div class="px-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 text-white/60 transition-colors group-hover:text-white"><path d="m6 9 6 6 6-6"></path></svg></div></div></div></div></div><div class="space-y-3"><h3 class="text-h4-bold text-white/60 tracking-wider px-2 py-1 font-space-grotesk">Protocol</h3><div class="space-y-1 ml-2 mt-3"><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:default"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/protocol/overview">Overview</a></div></div><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:default"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/protocol/chains">Chains</a></div></div><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:default"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/protocol/xava">XAVA DAO</a></div></div></div></div><div class="space-y-3"><h3 class="text-h4-bold text-white/60 tracking-wider px-2 py-1 font-space-grotesk">Developers</h3><div class="space-y-1 ml-2 mt-3"><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:pointer"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/overview">Platform</a><div class="px-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 text-white/60 transition-colors group-hover:text-white transform rotate-180"><path d="m6 9 6 6 6-6"></path></svg></div></div><div class="mt-1 ml-2 relative"><div class="absolute left-3 top-0 bottom-0 w-[2px] bg-white/20 overflow-hidden"><div class="absolute left-0 w-full h-6 bg-gradient-to-b from-[#997EDE] to-[#77A7FF] transition-transform duration-200 ease-in-out" style="transform: translateY(258px);"></div></div><div class="pl-4 space-y-1"><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/overview">Overview</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/analytics-engine">Analytics Engine</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/cache">Cache</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/environment-variables">Environment Variables</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/memory-store">Memory Store (KV)</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/queues">Queues</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/secret-manager">Secret Manager</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/storage">Storage (R2/S3)</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative font-medium bg-gradient-to-r from-[#997EDE] to-[#77A7FF] bg-clip-text text-transparent" href="https://test.nullshot.ai/en/docs/developers/platform/web-search">Browser Rendering</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/workflows">Workflows</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/d1-database">SQL Database</a><a class="h-7 flex items-center px-4 text-sm rounded-[4px] transition-colors font-space-grotesk relative text-white/60 hover:bg-[#43475E] hover:text-white" href="https://test.nullshot.ai/en/docs/developers/platform/vectorize">Vectorize</a></div></div></div><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:pointer"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/developers/agents-framework/overview">Agents Framework</a><div class="px-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 text-white/60 transition-colors group-hover:text-white"><path d="m6 9 6 6 6-6"></path></svg></div></div></div><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:pointer"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/developers/command-line/overview">Command Line</a><div class="px-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 text-white/60 transition-colors group-hover:text-white"><path d="m6 9 6 6 6-6"></path></svg></div></div></div><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:pointer"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/developers/mcp-framework/overview">Mcp Framework</a><div class="px-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 text-white/60 transition-colors group-hover:text-white"><path d="m6 9 6 6 6-6"></path></svg></div></div></div><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:pointer"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/developers/services/overview">Services</a><div class="px-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 text-white/60 transition-colors group-hover:text-white"><path d="m6 9 6 6 6-6"></path></svg></div></div></div><div class="flex flex-col"><div class="flex justify-between items-center rounded-[4px] transition-colors hover:bg-[#43475E] group" style="cursor:default"><a class="flex-grow py-1.5 px-4 text-base rounded-[4px] transition-colors font-space-grotesk font-medium text-white group-hover:text-white" href="https://test.nullshot.ai/en/docs/developers/playground">Playground</a></div></div></div></div></div></div><div class="border-t border-white/12 p-4"><div class="space-y-2"><a href="https://discord.gg/acwpp6zWEc" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 py-1.5 text-sm text-white/80 hover:text-white font-space-grotesk"><span class="h-4 w-4 opacity-60"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"><path d="M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"></path></svg></span>Discord</a><a href="https://github.com/null-shot" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 py-1.5 text-sm text-white/80 hover:text-white font-space-grotesk"><span class="h-4 w-4 opacity-60"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></span>Github</a><a href="https://x.com/_nullshot_" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 py-1.5 text-sm text-white/80 hover:text-white font-space-grotesk"><span class="h-4 w-4 opacity-60"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"></path></svg></span>Twitter</a><a href="https://t.me/nullshotai" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 py-1.5 text-sm text-white/80 hover:text-white font-space-grotesk"><span class="h-4 w-4 opacity-60"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg></span>Telegram</a></div></div></div></div><div id="docs-main-content" class="flex-1 overflow-y-auto scrollbar-hide"><div class="min-h-screen"><div class="md:py-12"><div class="max-w-4xl mx-auto px-4 md:px-6"><div class="md:border md:border-white/20 md:rounded-xl p-4 md:p-8 bg-[#16171A]"><div class="mb-8"><h1 class="text-4xl font-bold leading-tight text-white mb-3 font-space-grotesk">Browser Rendering</h1></div><div class="prose prose-invert prose-headings:text-white/90 prose-p:text-white/80 prose-a:text-blue-400 max-w-none prose-pre:p-0 prose-pre:bg-transparent prose-code:bg-transparent prose-code:p-0"><div class="mdx-content"><p class="text-white/80 mb-4 font-space-grotesk"><strong>Enable your agents to scrape and extract web content in real-time.</strong> Cloudflare Browser Rendering provides headless browser automation capabilities that your agents can use to capture screenshots, extract HTML content, scrape specific elements, and gather structured data from any webpage.</p>
<h2 id="key-features" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Key Features</h2>
<ul class="list-disc pl-6 space-y-2 mb-4 text-white/80 font-space-grotesk">
<li class="text-white/80 font-space-grotesk"><strong>Puppeteer Integration</strong>: Full Puppeteer API support with Cloudflare's optimized fork</li>
<li class="text-white/80 font-space-grotesk"><strong>Session Management</strong>: Create, reuse, and manage browser sessions with keep-alive functionality</li>
<li class="text-white/80 font-space-grotesk"><strong>Content Extraction</strong>: Extract HTML, text, and structured data from web pages</li>
<li class="text-white/80 font-space-grotesk"><strong>Screenshot Capture</strong>: Take screenshots of web pages for visual analysis</li>
<li class="text-white/80 font-space-grotesk"><strong>PDF Generation</strong>: Convert web pages to PDF documents</li>
<li class="text-white/80 font-space-grotesk"><strong>Element Scraping</strong>: Target specific HTML elements for data extraction</li>
<li class="text-white/80 font-space-grotesk"><strong>Global Network</strong>: Browser instances run on Cloudflare's edge network worldwide</li>
<li class="text-white/80 font-space-grotesk"><strong>Rate Limiting</strong>: Built-in limits and monitoring for production usage</li>
</ul>
<h2 id="getting-started" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Getting Started</h2>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="wrangler-configuration-2">Wrangler Configuration</h3>
<p class="text-white/80 mb-4 font-space-grotesk">First, add browser rendering in your <code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">wrangler.json</code>:</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">json</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(156, 220, 254);">"bindings"</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(156, 220, 254);">"binding"</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">"BROWSER"</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(156, 220, 254);">"type"</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">"browser"</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="agent-example-3">Agent Example</h3>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// src/agents/WebScrapingAgent.ts</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span class="token"> </span><span class="token" style="color: rgb(156, 220, 254);">AiAgentSDK</span><span class="token"> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@typescript-agent-framework/agent'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">export</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">WebScrapingAgent</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">extends</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AiAgentSDK</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(220, 220, 170);">constructor</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">super</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">processMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AIUISDKMessage</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(78, 201, 176);">AgentResponse</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// This is an unrealistic example, but showcases how you can use browser rendering with agents</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> enrichedMessage </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">enrichMessageWithWebContent</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> result </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">streamText</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      model</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">model</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      system</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'You are a helpful assistant with access to real-time web content.'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> enrichedMessage</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      maxSteps</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">10</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> result</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toDataStreamResponse</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(106, 153, 85);">// This is an unrealistic example, but showcases how you can use browser rendering with agents</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">enrichMessageWithWebContent</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AIUISDKMessage</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Extract URLs from the message for content enrichment</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urls </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">===</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Create a new page for web scraping</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Scrape content from each URL</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> enrichedContext </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> url </span><span class="token" style="color: rgb(86, 156, 214);">of</span><span> urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">slice</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">3</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Set viewport for consistent screenshots</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">setViewport</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1200</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">800</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Navigate to the URL</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Extract main content</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> content </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">evaluate</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> selectors </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(206, 145, 120);">'main'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'article'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'.content'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'#content'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'.post'</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> selector </span><span class="token" style="color: rgb(86, 156, 214);">of</span><span> selectors</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>              </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> element </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelector</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>selector</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>              </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>element</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>                </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>                  title</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">title</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>                  text</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> element</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">textContent</span><span class="token" style="color: rgb(212, 212, 212);">?.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">substring</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">500</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">''</span><span>
</span></span><span><span>                </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>              </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>              title</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">title</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>              text</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">body</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">textContent</span><span class="token" style="color: rgb(212, 212, 212);">?.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">substring</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">500</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">''</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Take screenshot for visual context</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshot </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">screenshot</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'png'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            fullPage</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">push</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            title</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">title</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'Unknown Title'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            text</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">text</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            extractedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Failed to scrape </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">url</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">:</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Close the page when done</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Add web content to the message</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">let</span><span> enrichedContent </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> contextSummary </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> enrichedContext
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">map</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>ctx </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Web Content from </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">ctx</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">url</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">:\n</span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">ctx</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">text</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">join</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'\n\n'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>        
</span><span><span>        enrichedContent </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">message</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">content</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">\n\n[Web Content Added]:\n</span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">contextSummary</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> enrichedContent</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span>        enrichedContext
</span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'Failed to enrich message with web content:'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="mcp-tool-integration-4">MCP Tool Integration</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Integrate browser rendering capabilities with MCP tools:</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// src/mcp/BrowserRenderingMCPServer.ts</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span class="token"> </span><span class="token" style="color: rgb(156, 220, 254);">MCPServerDO</span><span class="token"> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@typescript-agent-framework/mcp'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">export</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">BrowserRenderingMCPServer</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">extends</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">MCPServerDO</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(220, 220, 170);">constructor</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>state</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">DurableObjectState</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> env</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">super</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>state</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">protected</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">configureServer</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token string-property" style="color: rgb(156, 220, 254);">'scrape-content'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> selector </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> 
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> 
</span></span><span><span>        selector</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span> 
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Create a new page for scraping</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Navigate to the URL</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Extract content using the specified selector</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> content </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">evaluate</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sel</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> element </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelector</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sel</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> element </span><span class="token" style="color: rgb(212, 212, 212);">?</span><span> element</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">textContent</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">''</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> selector </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'body'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Close the page</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            success</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">true</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> content </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">''</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> selector </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'body'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            scrapedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            success</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            error</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">message</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span>            url
</span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token string-property" style="color: rgb(156, 220, 254);">'take-screenshot'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> viewport </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        viewport</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Set viewport if provided</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>viewport</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">setViewport</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>viewport</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Navigate and take screenshot</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshot </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">screenshot</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'png'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            fullPage</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            success</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">true</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toString</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'base64'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            capturedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            success</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            error</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">message</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span>            url
</span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h2 id="typescript-api-reference" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">TypeScript API Reference</h2>
<p class="text-white/80 mb-4 font-space-grotesk">You can access the browser rendering API via the <code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">env</code> of the <strong>Agent</strong> or <strong>MCP Tool</strong></p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// Example function that resides within any Agent or MCP Tool</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">function</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">example</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(106, 153, 85);">// BROWSER can be named to anything and equals the "binding" sent in wrangler.json</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">env</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="browser-instance-methods-6">Browser Instance Methods</h3>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">this.browser.newPage(): Promise&lt;Page&gt;</code></strong><br>
Create a new page within the browser instance for web operations.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">this.browser.isConnected(): boolean</code></strong><br>
Check if the browser session is still active and connected.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">this.browser.close(): Promise&lt;void&gt;</code></strong><br>
Permanently close the browser instance and terminate all sessions.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">this.browser.disconnect(): void</code></strong><br>
Disconnect from browser session while keeping it alive for reuse.</p>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="page-methods-7">Page Methods</h3>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.goto(url, options?): Promise&lt;Response&gt;</code></strong><br>
Navigate to a specific URL and wait for the page to load.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.screenshot(options?): Promise&lt;Buffer&gt;</code></strong><br>
Capture a screenshot of the current page with customizable options.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.setViewport(viewport): Promise&lt;void&gt;</code></strong><br>
Set the page viewport size for responsive testing.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.evaluate(fn, ...args): Promise&lt;any&gt;</code></strong><br>
Execute JavaScript code within the page context.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.waitForSelector(selector): Promise&lt;ElementHandle&gt;</code></strong><br>
Wait for an element to appear on the page.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.close(): Promise&lt;void&gt;</code></strong><br>
Close the current page while keeping the browser session alive.</p>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="browser-options-8">Browser Options</h3>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(86, 156, 214);">interface</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">ScreenshotOptions</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  viewport</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  fullPage</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">boolean</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  format</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'png'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'jpeg'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  quality</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// 1-100 for JPEG</span><span>
</span></span><span><span>  waitFor</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// milliseconds to wait</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">interface</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">PDFOptions</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  format</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'A4'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'Letter'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'Legal'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  landscape</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">boolean</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  margin</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    top</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    right</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    bottom</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    left</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  printBackground</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">boolean</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">interface</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">ScrapeOptions</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  elements</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Array</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    attribute</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'text'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'innerHTML'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'outerHTML'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  waitFor</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">interface</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">StructuredDataOptions</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  schema</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Record</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// CSS selectors for data extraction</span><span>
</span></span><span><span>  waitFor</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h2 id="examples" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Examples</h2>
<p class="text-white/80 mb-4 font-space-grotesk">Learn how to integrate browser rendering capabilities into your agents and MCP tools through practical, real-world implementations.</p>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="basic-puppeteer-usage-10">Basic Puppeteer Usage</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Get started with Cloudflare's Puppeteer integration using the standard Puppeteer API. For complete API documentation, see <a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://developers.cloudflare.com/browser-rendering/platform/puppeteer/" target="_blank" rel="noopener noreferrer">Cloudflare's Puppeteer Platform Guide</a>.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// src/agents/PuppeteerAgent.ts</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span class="token"> </span><span class="token" style="color: rgb(156, 220, 254);">AiAgentSDK</span><span class="token"> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@typescript-agent-framework/agent'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token">puppeteer</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@cloudflare/puppeteer'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">export</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">PuppeteerAgent</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">extends</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AiAgentSDK</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(220, 220, 170);">constructor</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">super</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">processMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AIUISDKMessage</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(78, 201, 176);">AgentResponse</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">env</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">includes</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'analyze page'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urls </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> analysis </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">analyzePage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          message</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Page analysis complete for </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">urls</span><span class="token template-string" style="color: rgb(212, 212, 212);">[</span><span class="token template-string" style="color: rgb(181, 206, 168);">0</span><span class="token template-string" style="color: rgb(212, 212, 212);">]</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          actions</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'page_analyzed'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            data</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> analysis
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">"Send me a URL to analyze!"</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">analyzePage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">env</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Launch browser with 10-minute keep-alive</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> browser </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> puppeteer</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">launch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> 
</span></span><span><span>      keep_alive</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">600000</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// 10 minutes</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Set mobile viewport</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">setViewport</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">375</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">667</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Navigate and wait for network to be idle</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Get page metrics and content</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>metrics</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> title</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">all</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>        page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">metrics</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">title</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">screenshot</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'png'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> fullPage</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Extract structured data</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> analysis </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">evaluate</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          title</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">title</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          description</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelector</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'meta[name="description"]'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">?.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">getAttribute</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'content'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          headings</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Array</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(197, 134, 192);">from</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelectorAll</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'h1, h2, h3'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">map</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>h </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            tag</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> h</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">tagName</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toLowerCase</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            text</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> h</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">textContent</span><span class="token" style="color: rgb(212, 212, 212);">?.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">trim</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          links</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Array</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(197, 134, 192);">from</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelectorAll</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'a[href]'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          images</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Array</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(197, 134, 192);">from</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelectorAll</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'img[src]'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        metrics</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        analysis</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toString</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'base64'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        analyzedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">finally</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Browser will stay alive for 10 minutes due to keep_alive setting</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">disconnect</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// Don't close, just disconnect</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urlRegex </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token regex-delimiter" style="color: rgb(209, 105, 105);">/</span><span class="token regex-source language-regex" style="color: rgb(209, 105, 105);">https?:\/\/[^\s]+</span><span class="token regex-delimiter" style="color: rgb(209, 105, 105);">/</span><span class="token regex-flags" style="color: rgb(209, 105, 105);">g</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">match</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urlRegex</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="session-reuse-example-11">Session Reuse Example</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Optimize performance by reusing browser sessions with Durable Objects. This advanced pattern keeps browser instances alive for 60 seconds, reducing startup time and improving response times for multiple requests.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// src/agents/BrowserSessionAgent.ts</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span class="token"> </span><span class="token" style="color: rgb(156, 220, 254);">AiAgentSDK</span><span class="token"> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@typescript-agent-framework/agent'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token">puppeteer</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@cloudflare/puppeteer'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">export</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">BrowserSessionAgent</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">extends</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AiAgentSDK</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token null nil" style="color: rgb(86, 156, 214);">null</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> keptAliveInSeconds </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">readonly</span><span> </span><span class="token" style="color: rgb(156, 220, 254);">KEEP_BROWSER_ALIVE_IN_SECONDS</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">60</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(220, 220, 170);">constructor</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">super</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">processMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AIUISDKMessage</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(78, 201, 176);">AgentResponse</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">includes</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'screenshot'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urls </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshots </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">takeScreenshots</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          message</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Captured </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">screenshots</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">length</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);"> screenshots</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          actions</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'screenshots_taken'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            data</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> screenshots </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">"Send me URLs to take screenshots!"</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">takeScreenshots</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Reuse existing browser session or create new one</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">!</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">!</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">isConnected</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">log</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'Starting new browser session'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> puppeteer</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">launch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">env</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Reset keep-alive timer</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">keptAliveInSeconds</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshots </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Take screenshots of different screen sizes</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> viewports </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1920</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1080</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1366</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">768</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">414</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">896</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> url </span><span class="token" style="color: rgb(86, 156, 214);">of</span><span> urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">slice</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">3</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> viewport </span><span class="token" style="color: rgb(86, 156, 214);">of</span><span> viewports</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">setViewport</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>viewport</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshot </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">screenshot</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'jpeg'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            quality</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">80</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>          screenshots</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">push</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            viewport</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toString</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'base64'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            capturedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Failed to screenshot </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">url</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">:</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Close page but keep browser session alive</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Start keep-alive timer if not already running</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">startKeepAliveTimer</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> screenshots</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">startKeepAliveTimer</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">keptAliveInSeconds</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">===</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">log</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'Starting browser keep-alive timer'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">scheduleKeepAlive</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">scheduleKeepAlive</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(220, 220, 170);">setTimeout</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">keptAliveInSeconds</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">+=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">10</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">keptAliveInSeconds</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(156, 220, 254);">KEEP_BROWSER_ALIVE_IN_SECONDS</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">log</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Browser kept alive for </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(86, 156, 214);">this</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">keptAliveInSeconds</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">s</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">scheduleKeepAlive</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">else</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">log</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Browser session timeout after </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(86, 156, 214);">this</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string" style="color: rgb(156, 220, 254);">KEEP_BROWSER_ALIVE_IN_SECONDS</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">s</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token null nil" style="color: rgb(86, 156, 214);">null</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">10000</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// Check every 10 seconds</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urlRegex </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token regex-delimiter" style="color: rgb(209, 105, 105);">/</span><span class="token regex-source language-regex" style="color: rgb(209, 105, 105);">https?:\/\/[^\s]+</span><span class="token regex-delimiter" style="color: rgb(209, 105, 105);">/</span><span class="token regex-flags" style="color: rgb(209, 105, 105);">g</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">match</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urlRegex</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h2 id="best-practices" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Best Practices</h2>
<p class="text-white/80 mb-4 font-space-grotesk">Essential patterns and techniques for building robust, performant browser automation workflows. These practices help you avoid common pitfalls and optimize resource usage.</p>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="efficient-scraping-13">Efficient Scraping</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Use targeted CSS selectors and avoid scraping entire page content to minimize bandwidth and processing time.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">//  Good: Use specific selectors for targeted content</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token function-variable" style="color: rgb(220, 220, 170);">efficientScraping</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/scrape'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      elements</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'h1'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'text'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'.article-content'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'text'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'meta[name="description"]'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'content'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      waitFor</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">2000</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(106, 153, 85);">//  Avoid: Scraping entire page unnecessarily</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token function-variable" style="color: rgb(220, 220, 170);">inefficientScraping</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/scrape'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      elements</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'body'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'innerHTML'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="session-management-14">Session Management</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Implement browser session reuse patterns to reduce startup overhead and improve performance for multiple operations.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">//  Good: Reuse browser sessions for related tasks</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">BrowserSession</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token null nil" style="color: rgb(86, 156, 214);">null</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token null nil" style="color: rgb(86, 156, 214);">null</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">getSession</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">!</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">sessionId</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> response </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/session'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> keepAlive</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">300000</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// 5 minutes</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> data </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> response</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">json</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">sessionId</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> data</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">sessionId</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">sessionId</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">scrapeWithSession</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> selectors</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> sessionId </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">getSession</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/scrape'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        sessionId</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        elements</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> selectors</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">map</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>selector </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'text'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="error-handling-retries-15">Error Handling &amp; Retries</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Implement robust error handling with exponential backoff and retry logic for network failures and rate limits.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">//  Good: Implement retry logic for failed requests</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">function</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">robustBrowserFetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>
</span></span><span><span>  browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> 
</span></span><span><span>  endpoint</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> 
</span></span><span><span>  options</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> 
</span></span><span><span>  maxRetries </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">3</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">let</span><span> attempt </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> attempt </span><span class="token" style="color: rgb(212, 212, 212);">&lt;=</span><span> maxRetries</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> attempt</span><span class="token" style="color: rgb(212, 212, 212);">++</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> response </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>endpoint</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> options</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>response</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">ok</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> response</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>response</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">status</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">===</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">429</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(106, 153, 85);">// Rate limited, wait before retry</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">new</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>resolve </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">setTimeout</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>resolve</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1000</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">*</span><span> attempt</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">continue</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">throw</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">new</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">HTTP </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">response</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">status</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">: </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">response</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">statusText</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Attempt </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">attempt</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);"> failed:</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>attempt </span><span class="token" style="color: rgb(212, 212, 212);">===</span><span> maxRetries</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">throw</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Exponential backoff</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">new</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>resolve </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">setTimeout</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>resolve</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1000</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">*</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Math</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">pow</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">2</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attempt </span><span class="token" style="color: rgb(212, 212, 212);">-</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="performance-optimization-16">Performance Optimization</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Batch operations and use parallel processing to maximize throughput while respecting rate limits and resource constraints.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">//  Good: Batch multiple operations</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">function</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">batchBrowserOperations</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> urls</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> promises </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">map</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>screenshot</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> links</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">all</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>        browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/screenshot'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            viewport</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">800</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">600</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            format</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'jpeg'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            quality</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">80</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/content'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/links'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">arrayBuffer</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">json</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        links</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> links</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">json</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Failed to process </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">url</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">:</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">message</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">all</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>promises</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h2 id="limitations--considerations" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Limitations &amp; Considerations</h2>
<p class="text-white/80 mb-4 font-space-grotesk">Important constraints and pricing considerations when using browser rendering at scale. Understanding these limits helps you design efficient workflows and manage costs effectively.</p>
<ul class="list-disc pl-6 space-y-2 mb-4 text-white/80 font-space-grotesk">
<li class="text-white/80 font-space-grotesk"><strong>Rate Limits</strong>: 1000 requests per minute per account</li>
<li class="text-white/80 font-space-grotesk"><strong>Session Timeout</strong>: Browser sessions timeout after 5 minutes of inactivity</li>
<li class="text-white/80 font-space-grotesk"><strong>Memory Limits</strong>: Complex pages may exceed memory allocation</li>
<li class="text-white/80 font-space-grotesk"><strong>JavaScript Execution</strong>: Pages with heavy JavaScript may require longer wait times</li>
<li class="text-white/80 font-space-grotesk"><strong>Geographic Restrictions</strong>: Some websites may block requests from certain regions</li>
<li class="text-white/80 font-space-grotesk"><strong>Cost</strong>: Each browser operation incurs usage charges based on execution time</li>
</ul>
<h2 id="related-services" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Related Services</h2>
<ul class="list-disc pl-6 space-y-2 mb-4 text-white/80 font-space-grotesk">
<li class="text-white/80 font-space-grotesk"><strong><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://test.nullshot.ai/en/developers/platform/durable-objects">Durable Objects</a></strong> - Maintain browser sessions across requests</li>
<li class="text-white/80 font-space-grotesk"><strong><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://test.nullshot.ai/en/developers/platform/queues">Queues</a></strong> - Queue browser rendering tasks for batch processing</li>
<li class="text-white/80 font-space-grotesk"><strong><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://test.nullshot.ai/en/developers/platform/storage">Storage</a></strong> - Store screenshots, PDFs, and scraped content</li>
<li class="text-white/80 font-space-grotesk"><strong><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://test.nullshot.ai/en/developers/platform/memory-store">Memory Store</a></strong> - Cache frequently accessed web content</li>
</ul>
<hr class="my-8 border-0 h-px bg-white/20">
<h2 id="official-documentation" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Official Documentation</h2>
<ul class="list-disc pl-6 space-y-2 mb-4 text-white/80 font-space-grotesk">
<li class="text-white/80 font-space-grotesk"><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://developers.cloudflare.com/browser-rendering/" target="_blank" rel="noopener noreferrer">Browser Rendering API Documentation</a></li>
<li class="text-white/80 font-space-grotesk"><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://developers.cloudflare.com/browser-rendering/rest-api/" target="_blank" rel="noopener noreferrer">REST API Reference</a></li>
<li class="text-white/80 font-space-grotesk"><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://developers.cloudflare.com/browser-rendering/workers-bindings/" target="_blank" rel="noopener noreferrer">Workers Bindings Guide</a></li>
</ul></div></div><div class="mt-12 flex flex-col md:flex-row gap-4"><a class="md:flex-1 rounded-lg border border-white/20 p-4 md:p-6 text-white/80 hover:text-white transition-colors group hover:border-white/40" href="https://test.nullshot.ai/en/docs/developers/platform/storage"><div class="flex items-center justify-between"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left h-5 w-5 text-blue-400 group-hover:text-blue-300 transition-colors flex-shrink-0"><path d="m15 18-6-6 6-6"></path></svg><div class="min-w-0 text-right"><div class="text-sm text-white/60 font-space-grotesk mb-1">Previous</div><div class="text-base font-medium font-space-grotesk truncate">Storage (R2/S3)</div></div></div></a><a class="md:flex-1 rounded-lg border border-white/20 p-4 md:p-6 text-white/80 hover:text-white transition-colors group hover:border-white/40" href="https://test.nullshot.ai/en/docs/developers/platform/workflows"><div class="flex items-center justify-between"><div class="min-w-0 text-left"><div class="text-sm text-white/60 font-space-grotesk mb-1">Next</div><div class="text-base font-medium font-space-grotesk truncate">Workflows</div></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-5 w-5 text-blue-400 group-hover:text-blue-300 transition-colors flex-shrink-0"><path d="m9 18 6-6-6-6"></path></svg></div></a></div></div></div></div><!--$--><!--/$--></div></div><div class="w-64 border-l border-white/10 bg-[#16171A] flex-shrink-0"><div class="sticky top-0 h-screen overflow-y-auto scrollbar-hide"><div class="w-full h-full pt-6 px-4 overflow-y-auto scrollbar-hide"><div class="pt-4"><h4 class="font-medium text-sm text-white/60 mb-4 font-space-grotesk">On This Page</h4><div class="flex flex-row"><div class="w-[2px] bg-white/20 relative overflow-hidden"></div><nav class="flex-1"><div class="space-y-2"><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#key-features" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Key Features</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#getting-started" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Getting Started</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#wrangler-configuration-2" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Wrangler Configuration</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#agent-example-3" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Agent Example</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#mcp-tool-integration-4" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">MCP Tool Integration</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#typescript-api-reference" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">TypeScript API Reference</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#browser-instance-methods-6" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Browser Instance Methods</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#page-methods-7" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Page Methods</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#browser-options-8" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Browser Options</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#examples" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Examples</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#basic-puppeteer-usage-10" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Basic Puppeteer Usage</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#session-reuse-example-11" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Session Reuse Example</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#best-practices" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Best Practices</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#efficient-scraping-13" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Efficient Scraping</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#session-management-14" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Session Management</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#error-handling-retries-15" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Error Handling &amp; Retries</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#performance-optimization-16" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Performance Optimization</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#limitations--considerations" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Limitations &amp; Considerations</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#related-services" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Related Services</a><a href="https://test.nullshot.ai/en/docs/developers/platform/web-search#official-documentation" class="block py-1 text-sm rounded-md transition-colors font-space-grotesk text-white/60 hover:text-white">Official Documentation</a></div></nav></div></div></div></div></div></div><div class="md:hidden bg-[#14161D] min-h-screen pt-16"><div id="docs-main-content-mobile" class="overflow-y-auto"><div class="md:hidden px-5 py-8 bg-[#16171A]"><button class="w-full flex items-center justify-between gap-2 px-4 py-3 bg-[#323546] text-white rounded-xl transition-colors min-h-[48px] touch-manipulation" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-_R_d9fknmjb_" data-state="closed"><span class="text-sm font-bold font-space-grotesk">Platform</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.33" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-4 w-4 text-white/80"><path d="m6 9 6 6 6-6"></path></svg></button></div><div class="md:py-12"><div class="max-w-4xl mx-auto px-4 md:px-6"><div class="md:border md:border-white/20 md:rounded-xl p-4 md:p-8 bg-[#16171A]"><div class="mb-8"><h1 class="text-4xl font-bold leading-tight text-white mb-3 font-space-grotesk">Browser Rendering</h1></div><div class="prose prose-invert prose-headings:text-white/90 prose-p:text-white/80 prose-a:text-blue-400 max-w-none prose-pre:p-0 prose-pre:bg-transparent prose-code:bg-transparent prose-code:p-0"><div class="mdx-content"><p class="text-white/80 mb-4 font-space-grotesk"><strong>Enable your agents to scrape and extract web content in real-time.</strong> Cloudflare Browser Rendering provides headless browser automation capabilities that your agents can use to capture screenshots, extract HTML content, scrape specific elements, and gather structured data from any webpage.</p>
<h2 id="key-features" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Key Features</h2>
<ul class="list-disc pl-6 space-y-2 mb-4 text-white/80 font-space-grotesk">
<li class="text-white/80 font-space-grotesk"><strong>Puppeteer Integration</strong>: Full Puppeteer API support with Cloudflare's optimized fork</li>
<li class="text-white/80 font-space-grotesk"><strong>Session Management</strong>: Create, reuse, and manage browser sessions with keep-alive functionality</li>
<li class="text-white/80 font-space-grotesk"><strong>Content Extraction</strong>: Extract HTML, text, and structured data from web pages</li>
<li class="text-white/80 font-space-grotesk"><strong>Screenshot Capture</strong>: Take screenshots of web pages for visual analysis</li>
<li class="text-white/80 font-space-grotesk"><strong>PDF Generation</strong>: Convert web pages to PDF documents</li>
<li class="text-white/80 font-space-grotesk"><strong>Element Scraping</strong>: Target specific HTML elements for data extraction</li>
<li class="text-white/80 font-space-grotesk"><strong>Global Network</strong>: Browser instances run on Cloudflare's edge network worldwide</li>
<li class="text-white/80 font-space-grotesk"><strong>Rate Limiting</strong>: Built-in limits and monitoring for production usage</li>
</ul>
<h2 id="getting-started" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Getting Started</h2>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="wrangler-configuration">Wrangler Configuration</h3>
<p class="text-white/80 mb-4 font-space-grotesk">First, add browser rendering in your <code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">wrangler.json</code>:</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">json</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(156, 220, 254);">"bindings"</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(156, 220, 254);">"binding"</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">"BROWSER"</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(156, 220, 254);">"type"</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">"browser"</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="agent-example">Agent Example</h3>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// src/agents/WebScrapingAgent.ts</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span class="token"> </span><span class="token" style="color: rgb(156, 220, 254);">AiAgentSDK</span><span class="token"> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@typescript-agent-framework/agent'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">export</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">WebScrapingAgent</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">extends</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AiAgentSDK</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(220, 220, 170);">constructor</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">super</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">processMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AIUISDKMessage</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(78, 201, 176);">AgentResponse</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// This is an unrealistic example, but showcases how you can use browser rendering with agents</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> enrichedMessage </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">enrichMessageWithWebContent</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> result </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">streamText</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      model</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">model</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      system</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'You are a helpful assistant with access to real-time web content.'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> enrichedMessage</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      maxSteps</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">10</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> result</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toDataStreamResponse</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(106, 153, 85);">// This is an unrealistic example, but showcases how you can use browser rendering with agents</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">enrichMessageWithWebContent</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AIUISDKMessage</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Extract URLs from the message for content enrichment</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urls </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">===</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Create a new page for web scraping</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Scrape content from each URL</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> enrichedContext </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> url </span><span class="token" style="color: rgb(86, 156, 214);">of</span><span> urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">slice</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">3</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Set viewport for consistent screenshots</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">setViewport</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1200</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">800</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Navigate to the URL</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Extract main content</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> content </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">evaluate</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> selectors </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(206, 145, 120);">'main'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'article'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'.content'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'#content'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'.post'</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> selector </span><span class="token" style="color: rgb(86, 156, 214);">of</span><span> selectors</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>              </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> element </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelector</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>selector</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>              </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>element</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>                </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>                  title</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">title</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>                  text</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> element</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">textContent</span><span class="token" style="color: rgb(212, 212, 212);">?.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">substring</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">500</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">''</span><span>
</span></span><span><span>                </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>              </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>              title</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">title</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>              text</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">body</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">textContent</span><span class="token" style="color: rgb(212, 212, 212);">?.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">substring</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">500</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">''</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Take screenshot for visual context</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshot </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">screenshot</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'png'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            fullPage</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">push</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            title</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">title</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'Unknown Title'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            text</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">text</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            extractedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Failed to scrape </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">url</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">:</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Close the page when done</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Add web content to the message</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">let</span><span> enrichedContent </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> contextSummary </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> enrichedContext
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">map</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>ctx </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Web Content from </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">ctx</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">url</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">:\n</span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">ctx</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">text</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">join</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'\n\n'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>        
</span><span><span>        enrichedContent </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">message</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">content</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">\n\n[Web Content Added]:\n</span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">contextSummary</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> enrichedContent</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span>        enrichedContext
</span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'Failed to enrich message with web content:'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        enrichedContext</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="mcp-tool-integration">MCP Tool Integration</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Integrate browser rendering capabilities with MCP tools:</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// src/mcp/BrowserRenderingMCPServer.ts</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span class="token"> </span><span class="token" style="color: rgb(156, 220, 254);">MCPServerDO</span><span class="token"> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@typescript-agent-framework/mcp'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">export</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">BrowserRenderingMCPServer</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">extends</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">MCPServerDO</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(220, 220, 170);">constructor</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>state</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">DurableObjectState</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> env</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">super</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>state</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">protected</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">configureServer</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token string-property" style="color: rgb(156, 220, 254);">'scrape-content'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> selector </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> 
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> 
</span></span><span><span>        selector</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span> 
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Create a new page for scraping</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Navigate to the URL</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Extract content using the specified selector</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> content </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">evaluate</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sel</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> element </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelector</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sel</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> element </span><span class="token" style="color: rgb(212, 212, 212);">?</span><span> element</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">textContent</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">''</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> selector </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'body'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Close the page</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            success</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">true</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> content </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">''</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> selector </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'body'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            scrapedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            success</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            error</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">message</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span>            url
</span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token string-property" style="color: rgb(156, 220, 254);">'take-screenshot'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> viewport </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        viewport</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Set viewport if provided</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>viewport</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">setViewport</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>viewport</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(106, 153, 85);">// Navigate and take screenshot</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshot </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">screenshot</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'png'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            fullPage</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            success</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">true</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toString</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'base64'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            capturedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            success</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            error</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">message</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span>            url
</span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h2 id="typescript-api-reference" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">TypeScript API Reference</h2>
<p class="text-white/80 mb-4 font-space-grotesk">You can access the browser rendering API via the <code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">env</code> of the <strong>Agent</strong> or <strong>MCP Tool</strong></p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// Example function that resides within any Agent or MCP Tool</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">function</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">example</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(106, 153, 85);">// BROWSER can be named to anything and equals the "binding" sent in wrangler.json</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">env</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="browser-instance-methods">Browser Instance Methods</h3>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">this.browser.newPage(): Promise&lt;Page&gt;</code></strong><br>
Create a new page within the browser instance for web operations.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">this.browser.isConnected(): boolean</code></strong><br>
Check if the browser session is still active and connected.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">this.browser.close(): Promise&lt;void&gt;</code></strong><br>
Permanently close the browser instance and terminate all sessions.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">this.browser.disconnect(): void</code></strong><br>
Disconnect from browser session while keeping it alive for reuse.</p>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="page-methods">Page Methods</h3>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.goto(url, options?): Promise&lt;Response&gt;</code></strong><br>
Navigate to a specific URL and wait for the page to load.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.screenshot(options?): Promise&lt;Buffer&gt;</code></strong><br>
Capture a screenshot of the current page with customizable options.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.setViewport(viewport): Promise&lt;void&gt;</code></strong><br>
Set the page viewport size for responsive testing.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.evaluate(fn, ...args): Promise&lt;any&gt;</code></strong><br>
Execute JavaScript code within the page context.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.waitForSelector(selector): Promise&lt;ElementHandle&gt;</code></strong><br>
Wait for an element to appear on the page.</p>
<p class="text-white/80 mb-4 font-space-grotesk"><strong><code class="bg-black/50 px-1 py-0.5 rounded text-green-400 font-mono text-sm">page.close(): Promise&lt;void&gt;</code></strong><br>
Close the current page while keeping the browser session alive.</p>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="browser-options">Browser Options</h3>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(86, 156, 214);">interface</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">ScreenshotOptions</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  viewport</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  fullPage</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">boolean</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  format</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'png'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'jpeg'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  quality</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// 1-100 for JPEG</span><span>
</span></span><span><span>  waitFor</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// milliseconds to wait</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">interface</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">PDFOptions</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  format</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'A4'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'Letter'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'Legal'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  landscape</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">boolean</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  margin</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    top</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    right</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    bottom</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    left</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  printBackground</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">boolean</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">interface</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">ScrapeOptions</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  elements</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Array</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    attribute</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'text'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'innerHTML'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'outerHTML'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  waitFor</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">interface</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">StructuredDataOptions</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  schema</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Record</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// CSS selectors for data extraction</span><span>
</span></span><span><span>  waitFor</span><span class="token" style="color: rgb(212, 212, 212);">?</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">number</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h2 id="examples" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Examples</h2>
<p class="text-white/80 mb-4 font-space-grotesk">Learn how to integrate browser rendering capabilities into your agents and MCP tools through practical, real-world implementations.</p>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="basic-puppeteer-usage">Basic Puppeteer Usage</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Get started with Cloudflare's Puppeteer integration using the standard Puppeteer API. For complete API documentation, see <a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://developers.cloudflare.com/browser-rendering/platform/puppeteer/" target="_blank" rel="noopener noreferrer">Cloudflare's Puppeteer Platform Guide</a>.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// src/agents/PuppeteerAgent.ts</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span class="token"> </span><span class="token" style="color: rgb(156, 220, 254);">AiAgentSDK</span><span class="token"> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@typescript-agent-framework/agent'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token">puppeteer</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@cloudflare/puppeteer'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">export</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">PuppeteerAgent</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">extends</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AiAgentSDK</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(220, 220, 170);">constructor</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">super</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">processMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AIUISDKMessage</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(78, 201, 176);">AgentResponse</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">env</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">includes</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'analyze page'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urls </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> analysis </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">analyzePage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          message</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Page analysis complete for </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">urls</span><span class="token template-string" style="color: rgb(212, 212, 212);">[</span><span class="token template-string" style="color: rgb(181, 206, 168);">0</span><span class="token template-string" style="color: rgb(212, 212, 212);">]</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          actions</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'page_analyzed'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            data</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> analysis
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">"Send me a URL to analyze!"</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">analyzePage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">env</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Launch browser with 10-minute keep-alive</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> browser </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> puppeteer</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">launch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> 
</span></span><span><span>      keep_alive</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">600000</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// 10 minutes</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Set mobile viewport</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">setViewport</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">375</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">667</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Navigate and wait for network to be idle</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Get page metrics and content</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>metrics</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> title</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">all</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>        page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">metrics</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">title</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">screenshot</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'png'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> fullPage</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">false</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Extract structured data</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> analysis </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">evaluate</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          title</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">title</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          description</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelector</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'meta[name="description"]'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">?.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">getAttribute</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'content'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          headings</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Array</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(197, 134, 192);">from</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelectorAll</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'h1, h2, h3'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">map</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>h </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            tag</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> h</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">tagName</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toLowerCase</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            text</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> h</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">textContent</span><span class="token" style="color: rgb(212, 212, 212);">?.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">trim</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          links</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Array</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(197, 134, 192);">from</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelectorAll</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'a[href]'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          images</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Array</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(197, 134, 192);">from</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token dom" style="color: rgb(156, 220, 254);">document</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">querySelectorAll</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'img[src]'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        metrics</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        analysis</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toString</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'base64'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        analyzedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">finally</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Browser will stay alive for 10 minutes due to keep_alive setting</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">disconnect</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// Don't close, just disconnect</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urlRegex </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token regex-delimiter" style="color: rgb(209, 105, 105);">/</span><span class="token regex-source language-regex" style="color: rgb(209, 105, 105);">https?:\/\/[^\s]+</span><span class="token regex-delimiter" style="color: rgb(209, 105, 105);">/</span><span class="token regex-flags" style="color: rgb(209, 105, 105);">g</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">match</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urlRegex</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="session-reuse-example">Session Reuse Example</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Optimize performance by reusing browser sessions with Durable Objects. This advanced pattern keeps browser instances alive for 60 seconds, reducing startup time and improving response times for multiple requests.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">// src/agents/BrowserSessionAgent.ts</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span class="token"> </span><span class="token" style="color: rgb(156, 220, 254);">AiAgentSDK</span><span class="token"> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@typescript-agent-framework/agent'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">import</span><span> </span><span class="token">puppeteer</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">from</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'@cloudflare/puppeteer'</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(197, 134, 192);">export</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">BrowserSessionAgent</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">extends</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AiAgentSDK</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token null nil" style="color: rgb(86, 156, 214);">null</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> keptAliveInSeconds </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">readonly</span><span> </span><span class="token" style="color: rgb(156, 220, 254);">KEEP_BROWSER_ALIVE_IN_SECONDS</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">60</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(220, 220, 170);">constructor</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">Env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">super</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>env</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">processMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> messages</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">AIUISDKMessage</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(78, 201, 176);">AgentResponse</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">includes</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'screenshot'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urls </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>message</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">content</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshots </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">takeScreenshots</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          message</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Captured </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">screenshots</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">length</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);"> screenshots</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          actions</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'screenshots_taken'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            data</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> screenshots </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> message</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">"Send me URLs to take screenshots!"</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">takeScreenshots</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urls</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Reuse existing browser session or create new one</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">!</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">!</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">isConnected</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">log</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'Starting new browser session'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> puppeteer</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">launch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">env</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(156, 220, 254);">BROWSER</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Reset keep-alive timer</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">keptAliveInSeconds</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshots </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> page </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">newPage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Take screenshots of different screen sizes</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> viewports </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1920</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1080</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1366</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">768</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">414</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">896</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> url </span><span class="token" style="color: rgb(86, 156, 214);">of</span><span> urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">slice</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">3</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> viewport </span><span class="token" style="color: rgb(86, 156, 214);">of</span><span> viewports</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">setViewport</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>viewport</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">goto</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> waitUntil</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'networkidle0'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>          
</span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> screenshot </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">screenshot</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            type</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'jpeg'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            quality</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">80</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>          screenshots</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">push</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            viewport</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">toString</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'base64'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            capturedAt</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Date</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">now</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Failed to screenshot </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">url</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">:</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Close page but keep browser session alive</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> page</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(106, 153, 85);">// Start keep-alive timer if not already running</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">startKeepAliveTimer</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> screenshots</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">startKeepAliveTimer</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">keptAliveInSeconds</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">===</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">0</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">log</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'Starting browser keep-alive timer'</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">scheduleKeepAlive</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">scheduleKeepAlive</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(220, 220, 170);">setTimeout</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">keptAliveInSeconds</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">+=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">10</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">keptAliveInSeconds</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token" style="color: rgb(156, 220, 254);">KEEP_BROWSER_ALIVE_IN_SECONDS</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">log</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Browser kept alive for </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(86, 156, 214);">this</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">keptAliveInSeconds</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">s</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">scheduleKeepAlive</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">else</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">log</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Browser session timeout after </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(86, 156, 214);">this</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string" style="color: rgb(156, 220, 254);">KEEP_BROWSER_ALIVE_IN_SECONDS</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">s</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">close</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">browser</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token null nil" style="color: rgb(86, 156, 214);">null</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">10000</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// Check every 10 seconds</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">extractUrlsFromMessage</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> urlRegex </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token regex-delimiter" style="color: rgb(209, 105, 105);">/</span><span class="token regex-source language-regex" style="color: rgb(209, 105, 105);">https?:\/\/[^\s]+</span><span class="token regex-delimiter" style="color: rgb(209, 105, 105);">/</span><span class="token regex-flags" style="color: rgb(209, 105, 105);">g</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">match</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>urlRegex</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">||</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h2 id="best-practices" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Best Practices</h2>
<p class="text-white/80 mb-4 font-space-grotesk">Essential patterns and techniques for building robust, performant browser automation workflows. These practices help you avoid common pitfalls and optimize resource usage.</p>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="efficient-scraping">Efficient Scraping</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Use targeted CSS selectors and avoid scraping entire page content to minimize bandwidth and processing time.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">//  Good: Use specific selectors for targeted content</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token function-variable" style="color: rgb(220, 220, 170);">efficientScraping</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/scrape'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      elements</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'h1'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'text'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'.article-content'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'text'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'meta[name="description"]'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'content'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      waitFor</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">2000</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>
</span><span><span></span><span class="token" style="color: rgb(106, 153, 85);">//  Avoid: Scraping entire page unnecessarily</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token function-variable" style="color: rgb(220, 220, 170);">inefficientScraping</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/scrape'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>    body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      elements</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'body'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'innerHTML'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="session-management">Session Management</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Implement browser session reuse patterns to reduce startup overhead and improve performance for multiple operations.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">//  Good: Reuse browser sessions for related tasks</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">class</span><span> </span><span class="token" style="color: rgb(78, 201, 176);">BrowserSession</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">private</span><span> sessionId</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">|</span><span> </span><span class="token null nil" style="color: rgb(86, 156, 214);">null</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token null nil" style="color: rgb(86, 156, 214);">null</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">getSession</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">!</span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">sessionId</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> response </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/session'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> keepAlive</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">300000</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(106, 153, 85);">// 5 minutes</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> data </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> response</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">json</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">sessionId</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> data</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">sessionId</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">sessionId</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">scrapeWithSession</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> selectors</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> sessionId </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">this</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">getSession</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>    
</span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/scrape'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>      body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        sessionId</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        elements</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> selectors</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">map</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>selector </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> selector</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attribute</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'text'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="error-handling-retries">Error Handling &amp; Retries</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Implement robust error handling with exponential backoff and retry logic for network failures and rate limits.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">//  Good: Implement retry logic for failed requests</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">function</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">robustBrowserFetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>
</span></span><span><span>  browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> 
</span></span><span><span>  endpoint</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> 
</span></span><span><span>  options</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> 
</span></span><span><span>  maxRetries </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">3</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">&lt;</span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(197, 134, 192);">for</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">let</span><span> attempt </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> attempt </span><span class="token" style="color: rgb(212, 212, 212);">&lt;=</span><span> maxRetries</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span> attempt</span><span class="token" style="color: rgb(212, 212, 212);">++</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> response </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>endpoint</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> options</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>response</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">ok</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> response</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>response</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">status</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">===</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">429</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(106, 153, 85);">// Rate limited, wait before retry</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">new</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>resolve </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">setTimeout</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>resolve</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1000</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">*</span><span> attempt</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">continue</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">throw</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">new</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">HTTP </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">response</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">status</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">: </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">response</span><span class="token template-string" style="color: rgb(212, 212, 212);">.</span><span class="token template-string property-access" style="color: rgb(156, 220, 254);">statusText</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Attempt </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">attempt</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);"> failed:</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">if</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>attempt </span><span class="token" style="color: rgb(212, 212, 212);">===</span><span> maxRetries</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(197, 134, 192);">throw</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(106, 153, 85);">// Exponential backoff</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">new</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>resolve </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">setTimeout</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>resolve</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1000</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">*</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Math</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">pow</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(181, 206, 168);">2</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> attempt </span><span class="token" style="color: rgb(212, 212, 212);">-</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">1</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h3 class="text-l font-semibold text-white/90 mt-6 mb-3 font-space-grotesk" id="performance-optimization">Performance Optimization</h3>
<p class="text-white/80 mb-4 font-space-grotesk">Batch operations and use parallel processing to maximize throughput while respecting rate limits and resource constraints.</p>
<div class="code-block-container relative group my-6"><div class="flex items-center justify-between bg-[#1e1e1e] border border-white/10 border-b-0 rounded-t-lg px-4 py-2 text-sm"><span class="text-white/60 font-mono text-xs uppercase tracking-wider">typescript</span><button class="flex items-center gap-1.5 px-2 py-1 rounded text-xs transition-all duration-200 hover:bg-white/10 text-white/60 hover:text-white/80 focus:outline-none focus:ring-2 focus:ring-blue-500/50" aria-label="Copy code"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy h-3 w-3"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg><span>Copy</span></button></div><div class="code-block-content bg-[#1e1e1e] border border-white/10 border-t-0 rounded-b-lg"><pre class="react-syntax-highlighter" style="color: rgb(212, 212, 212); font-size: 0.875rem; text-shadow: none; font-family: Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace; direction: ltr; text-align: left; white-space: pre; word-spacing: normal; word-break: normal; line-height: 1.5; tab-size: 4; hyphens: none; padding: 1rem; margin: 0px; overflow: visible; background: transparent; border-radius: 0.5rem; max-width: 100%;"><code style="white-space: pre-wrap; font-size: 0.875rem; line-height: 1.5; font-family: var(--font-geist-mono), Monaco, &quot;Cascadia Code&quot;, &quot;Roboto Mono&quot;, Consolas, &quot;Courier New&quot;, monospace; word-break: break-word;"><span><span class="token" style="color: rgb(106, 153, 85);">//  Good: Batch multiple operations</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">function</span><span> </span><span class="token" style="color: rgb(220, 220, 170);">batchBrowserOperations</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>browser</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">any</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> urls</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">string</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> promises </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> urls</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">map</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(86, 156, 214);">async</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>url</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(86, 156, 214);">=&gt;</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(197, 134, 192);">try</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(86, 156, 214);">const</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>screenshot</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> links</span><span class="token" style="color: rgb(212, 212, 212);">]</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">=</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">all</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">[</span><span>
</span></span><span><span>        browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/screenshot'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>            url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            viewport</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> width</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">800</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> height</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">600</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            format</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'jpeg'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>            quality</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(181, 206, 168);">80</span><span>
</span></span><span><span>          </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/content'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        browser</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">fetch</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(206, 145, 120);">'/links'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>          method</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'POST'</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          headers</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> </span><span class="token string-property" style="color: rgb(156, 220, 254);">'Content-Type'</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(206, 145, 120);">'application/json'</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>          body</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">JSON</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">stringify</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>        </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">]</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>      
</span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>        url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        screenshot</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> screenshot</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">arrayBuffer</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        content</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> content</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">json</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span>
</span></span><span><span>        links</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">await</span><span> links</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">json</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span> </span><span class="token" style="color: rgb(197, 134, 192);">catch</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(78, 201, 176);">console</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">error</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token template-string" style="color: rgb(206, 145, 120);">Failed to process </span><span class="token template-string" style="color: rgb(86, 156, 214);">${</span><span class="token template-string" style="color: rgb(156, 220, 254);">url</span><span class="token template-string" style="color: rgb(86, 156, 214);">}</span><span class="token template-string" style="color: rgb(206, 145, 120);">:</span><span class="token template-string template-punctuation" style="color: rgb(206, 145, 120);">`</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>      </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">{</span><span> url</span><span class="token" style="color: rgb(212, 212, 212);">,</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">:</span><span> error</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token property-access">message</span><span> </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span>    </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span>
</span></span><span><span>  </span><span class="token" style="color: rgb(212, 212, 212);">}</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span>  
</span><span><span>  </span><span class="token" style="color: rgb(197, 134, 192);">return</span><span> </span><span class="token known-class-name" style="color: rgb(78, 201, 176);">Promise</span><span class="token" style="color: rgb(212, 212, 212);">.</span><span class="token method property-access" style="color: rgb(220, 220, 170);">all</span><span class="token" style="color: rgb(212, 212, 212);">(</span><span>promises</span><span class="token" style="color: rgb(212, 212, 212);">)</span><span class="token" style="color: rgb(212, 212, 212);">;</span><span>
</span></span><span><span></span><span class="token" style="color: rgb(212, 212, 212);">}</span></span></code></pre></div></div>
<h2 id="limitations--considerations" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Limitations &amp; Considerations</h2>
<p class="text-white/80 mb-4 font-space-grotesk">Important constraints and pricing considerations when using browser rendering at scale. Understanding these limits helps you design efficient workflows and manage costs effectively.</p>
<ul class="list-disc pl-6 space-y-2 mb-4 text-white/80 font-space-grotesk">
<li class="text-white/80 font-space-grotesk"><strong>Rate Limits</strong>: 1000 requests per minute per account</li>
<li class="text-white/80 font-space-grotesk"><strong>Session Timeout</strong>: Browser sessions timeout after 5 minutes of inactivity</li>
<li class="text-white/80 font-space-grotesk"><strong>Memory Limits</strong>: Complex pages may exceed memory allocation</li>
<li class="text-white/80 font-space-grotesk"><strong>JavaScript Execution</strong>: Pages with heavy JavaScript may require longer wait times</li>
<li class="text-white/80 font-space-grotesk"><strong>Geographic Restrictions</strong>: Some websites may block requests from certain regions</li>
<li class="text-white/80 font-space-grotesk"><strong>Cost</strong>: Each browser operation incurs usage charges based on execution time</li>
</ul>
<h2 id="related-services" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Related Services</h2>
<ul class="list-disc pl-6 space-y-2 mb-4 text-white/80 font-space-grotesk">
<li class="text-white/80 font-space-grotesk"><strong><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://test.nullshot.ai/en/developers/platform/durable-objects">Durable Objects</a></strong> - Maintain browser sessions across requests</li>
<li class="text-white/80 font-space-grotesk"><strong><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://test.nullshot.ai/en/developers/platform/queues">Queues</a></strong> - Queue browser rendering tasks for batch processing</li>
<li class="text-white/80 font-space-grotesk"><strong><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://test.nullshot.ai/en/developers/platform/storage">Storage</a></strong> - Store screenshots, PDFs, and scraped content</li>
<li class="text-white/80 font-space-grotesk"><strong><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://test.nullshot.ai/en/developers/platform/memory-store">Memory Store</a></strong> - Cache frequently accessed web content</li>
</ul>
<hr class="my-8 border-0 h-px bg-white/20">
<h2 id="official-documentation" class="text-xl font-bold text-white/90 mt-8 mb-4 font-space-grotesk">Official Documentation</h2>
<ul class="list-disc pl-6 space-y-2 mb-4 text-white/80 font-space-grotesk">
<li class="text-white/80 font-space-grotesk"><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://developers.cloudflare.com/browser-rendering/" target="_blank" rel="noopener noreferrer">Browser Rendering API Documentation</a></li>
<li class="text-white/80 font-space-grotesk"><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://developers.cloudflare.com/browser-rendering/rest-api/" target="_blank" rel="noopener noreferrer">REST API Reference</a></li>
<li class="text-white/80 font-space-grotesk"><a class="text-[#7E98FF] hover:text-[#7E98FF] hover:underline font-space-grotesk" href="https://developers.cloudflare.com/browser-rendering/workers-bindings/" target="_blank" rel="noopener noreferrer">Workers Bindings Guide</a></li>
</ul></div></div><div class="mt-12 flex flex-col md:flex-row gap-4"><a class="md:flex-1 rounded-lg border border-white/20 p-4 md:p-6 text-white/80 hover:text-white transition-colors group hover:border-white/40" href="https://test.nullshot.ai/en/docs/developers/platform/storage"><div class="flex items-center justify-between"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left h-5 w-5 text-blue-400 group-hover:text-blue-300 transition-colors flex-shrink-0"><path d="m15 18-6-6 6-6"></path></svg><div class="min-w-0 text-right"><div class="text-sm text-white/60 font-space-grotesk mb-1">Previous</div><div class="text-base font-medium font-space-grotesk truncate">Storage (R2/S3)</div></div></div></a><a class="md:flex-1 rounded-lg border border-white/20 p-4 md:p-6 text-white/80 hover:text-white transition-colors group hover:border-white/40" href="https://test.nullshot.ai/en/docs/developers/platform/workflows"><div class="flex items-center justify-between"><div class="min-w-0 text-left"><div class="text-sm text-white/60 font-space-grotesk mb-1">Next</div><div class="text-base font-medium font-space-grotesk truncate">Workflows</div></div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right h-5 w-5 text-blue-400 group-hover:text-blue-300 transition-colors flex-shrink-0"><path d="m9 18 6-6-6-6"></path></svg></div></a></div></div></div></div><!--$--><!--/$--></div></div></main><footer class="w-full relative bg-[#14161D] border-t border-white/12"><div class="max-w-[1440px] mx-auto px-4 sm:px-6 md:px-[80px] py-[40px] md:py-[60px]"><div class="hidden md:flex flex-col items-center gap-8 w-full"><div class="flex justify-between items-center w-full"><a class="flex items-center cursor-pointer" href="https://test.nullshot.ai/en"><img alt="NullShot" loading="lazy" width="147" height="36" decoding="async" data-nimg="1" class="object-contain" style="color:transparent;filter:url(#logo-gradient)" src="./Browser Rendering _ NullShot_files/logo.svg"><svg width="0" height="0"><defs><lineargradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#997EDE"></stop><stop offset="100%" stop-color="#77A7FF"></stop></lineargradient></defs></svg></a><div class="flex items-center gap-6"><a class="flex items-center gap-2 group" href="https://test.nullshot.ai/exchange"><div class="w-6 h-6 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Exchange" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/exchange-icon.svg"></div><span class="text-white/60 font-space-grotesk font-bold text-base group-hover:text-white transition-colors">Exchange</span></a><a class="flex items-center gap-2 group" href="https://test.nullshot.ai/playground"><div class="w-6 h-6 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Playground" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/playground-icon.svg"></div><span class="text-white/60 font-space-grotesk font-bold text-base group-hover:text-white transition-colors">Playground</span></a><a class="flex items-center gap-2 group" href="https://test.nullshot.ai/brainstorm"><div class="w-6 h-6 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Brainstorm" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/brainstorm-icon.svg"></div><span class="text-white/60 font-space-grotesk font-bold text-base group-hover:text-white transition-colors">Brainstorm</span></a><a class="flex items-center gap-2 group" href="https://test.nullshot.ai/en/blog"><div class="w-6 h-6 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Blog" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/blogs-icon.svg"></div><span class="text-white/60 font-space-grotesk font-bold text-base group-hover:text-white transition-colors">Blog</span></a><a class="flex items-center gap-2 group" href="https://test.nullshot.ai/en/docs"><div class="w-6 h-6 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Docs" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/docs-icon.svg"></div><span class="text-white/60 font-space-grotesk font-bold text-base group-hover:text-white transition-colors">Docs</span></a></div><div class="flex gap-5 items-center"><a href="https://x.com/_nullshot_" target="_blank" rel="noopener noreferrer" class="w-8 h-8 rounded-full bg-gradient-to-r from-[#7849EF]/30 to-[#326CD8]/30 flex items-center justify-center border border-gradient-to-r from-[#7849EF] to-[#326CD8] hover:scale-105 transition-transform"><img alt="X (Twitter)" loading="lazy" width="14" height="14" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/twitter-icon.svg"></a><a href="https://github.com/null-shot" target="_blank" rel="noopener noreferrer" class="w-8 h-8 rounded-full bg-gradient-to-r from-[#7849EF]/30 to-[#326CD8]/30 flex items-center justify-center border border-gradient-to-r from-[#7849EF] to-[#326CD8] hover:scale-105 transition-transform"><img alt="GitHub" loading="lazy" width="15" height="15" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/github-icon.svg"></a><a href="https://t.me/nullshotai" target="_blank" rel="noopener noreferrer" class="w-8 h-8 rounded-full bg-gradient-to-r from-[#7849EF]/30 to-[#326CD8]/30 flex items-center justify-center border border-gradient-to-r from-[#7849EF] to-[#326CD8] hover:scale-105 transition-transform"><img alt="Telegram" loading="lazy" width="14" height="11" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/telegram-icon.svg"></a><a href="https://discord.gg/acwpp6zWEc" target="_blank" rel="noopener noreferrer" class="w-8 h-8 rounded-full bg-gradient-to-r from-[#7849EF]/30 to-[#326CD8]/30 flex items-center justify-center border border-gradient-to-r from-[#7849EF] to-[#326CD8] hover:scale-105 transition-transform"><img alt="Discord" loading="lazy" width="15" height="12" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/discord-icon.svg"></a></div></div><div class="w-full h-[1px] bg-[hsl(var(--border))]"></div><div class="flex justify-between items-center w-full"><div class="text-white/60 font-space-grotesk text-sm">Copyright 2025, All Rights Reserved by NullShot</div><div class="flex items-center gap-5"><a class="text-white/60 font-space-grotesk text-sm hover:text-white/80 transition-colors" href="https://test.nullshot.ai/privacy">Privacy Policy</a><a class="text-white/60 font-space-grotesk text-sm hover:text-white/80 transition-colors" href="https://test.nullshot.ai/tos">Terms &amp; Conditions</a></div></div></div><div class="flex md:hidden flex-col items-center gap-8 w-full"><div class="flex flex-col w-full gap-8"><a class="flex items-center cursor-pointer" href="https://test.nullshot.ai/en"><img alt="NullShot" loading="lazy" width="98" height="24" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/logo.svg"></a><div class="flex justify-between items-start w-full gap-6"><div class="flex flex-col gap-4"><h4 class="text-white font-space-grotesk font-bold text-sm">Explore </h4><div class="flex flex-col gap-3"><a class="flex items-center gap-1.5 group" href="https://test.nullshot.ai/brainstorm"><div class="w-4 h-4 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Brainstorm" loading="lazy" width="16" height="16" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/brainstorm-icon.svg"></div><span class="text-white/60 font-space-grotesk text-xs group-hover:text-white transition-colors">Brainstorm</span></a><a class="flex items-center gap-1.5 group" href="https://test.nullshot.ai/exchange"><div class="w-4 h-4 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Exchange" loading="lazy" width="16" height="16" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/exchange-icon.svg"></div><span class="text-white/60 font-space-grotesk text-xs group-hover:text-white transition-colors">Exchange</span></a><a class="flex items-center gap-1.5 group" href="https://test.nullshot.ai/playground"><div class="w-4 h-4 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Playground" loading="lazy" width="16" height="16" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/playground-icon.svg"></div><span class="text-white/60 font-space-grotesk text-xs group-hover:text-white transition-colors">Playground</span></a></div></div><div class="flex flex-col gap-4"><h4 class="text-white font-space-grotesk font-bold text-sm">Resources</h4><div class="flex flex-col gap-3"><a class="flex items-center gap-1.5 group" href="https://test.nullshot.ai/en/blog"><div class="w-4 h-4 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Blog" loading="lazy" width="16" height="16" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/blogs-icon.svg"></div><span class="text-white/60 font-space-grotesk text-xs group-hover:text-white transition-colors">Blogs</span></a><a class="flex items-center gap-1.5 group" href="https://test.nullshot.ai/en/docs"><div class="w-4 h-4 relative opacity-60 group-hover:opacity-100 transition-opacity duration-200"><img alt="Docs" loading="lazy" width="16" height="16" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/docs-icon.svg"></div><span class="text-white/60 font-space-grotesk text-xs group-hover:text-white transition-colors">Docs</span></a></div></div><div class="flex flex-col gap-4"><h4 class="text-white font-space-grotesk font-bold text-sm">Socials</h4><div class="flex flex-col gap-3"><a href="https://discord.gg/acwpp6zWEc" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5"><div class="w-3.5 h-3.5 relative flex items-center justify-center"><img alt="Discord" loading="lazy" width="12" height="9" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/discord-icon.svg"></div><span class="text-white/60 font-space-grotesk text-xs">Discord</span></a><a href="https://github.com/null-shot" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5"><div class="w-3.5 h-3.5 relative flex items-center justify-center"><img alt="GitHub" loading="lazy" width="12" height="12" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/github-icon.svg"></div><span class="text-white/60 font-space-grotesk text-xs">Github</span></a><a href="https://t.me/nullshotai" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5"><div class="w-3.5 h-3.5 relative flex items-center justify-center"><img alt="Telegram" loading="lazy" width="11" height="8" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/telegram-icon.svg"></div><span class="text-white/60 font-space-grotesk text-xs">Telegram</span></a><a href="https://x.com/_nullshot_" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5"><div class="w-3.5 h-3.5 relative flex items-center justify-center"><img alt="X (Twitter)" loading="lazy" width="11" height="11" decoding="async" data-nimg="1" class="object-contain" style="color:transparent" src="./Browser Rendering _ NullShot_files/twitter-icon.svg"></div><span class="text-white/60 font-space-grotesk text-xs">Twitter</span></a></div></div></div></div><div class="flex flex-col items-center gap-3 w-full"><div class="w-full h-[1px] bg-[hsl(var(--border))]"></div><div class="text-white/60 font-space-grotesk text-xs text-center">NullShot 2025, All Rights Reserved by NullShot</div><div class="flex items-center gap-5"><a class="text-white/60 font-space-grotesk text-xs hover:text-white/80 transition-colors" href="https://test.nullshot.ai/privacy">Privacy Policy</a><a class="text-white/60 font-space-grotesk text-xs hover:text-white/80 transition-colors" href="https://test.nullshot.ai/tos">Terms &amp; Conditions</a></div></div></div></div></footer></div></div><div role="region" aria-label="Notifications (F8)" tabindex="-1" style="pointer-events:none"><ol tabindex="-1" class="fixed top-[100px] right-4 z-[100] flex max-h-screen w-full flex-col max-w-[240px]"></ol></div><script src="./Browser Rendering _ NullShot_files/webpack-a44c8f29bbec59fc.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[81043,[\"99386\",\"static/chunks/7d384bb9-0ffedcc6b53f3e73.js\",\"803\",\"static/chunks/cd24890f-ec7b64c510add751.js\",\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"95630\",\"static/chunks/95630-79eb46537889cc8e.js\",\"31928\",\"static/chunks/31928-70a661b25895e6e5.js\",\"57875\",\"static/chunks/57875-6ef202f3cf7ed091.js\",\"37742\",\"static/chunks/37742-88327bccd3a920a3.js\",\"89329\",\"static/chunks/89329-9fb50cc5122e0593.js\",\"4228\",\"static/chunks/4228-aa6df1d124ddc104.js\",\"57220\",\"static/chunks/57220-cf287f77ab9c74d5.js\",\"21108\",\"static/chunks/21108-cc5726b6af4c34af.js\",\"7177\",\"static/chunks/app/layout-99e4f0c15c502077.js\"],\"PostHogProvider\"]\n3:I[61483,[\"99386\",\"static/chunks/7d384bb9-0ffedcc6b53f3e73.js\",\"803\",\"static/chunks/cd24890f-ec7b64c510add751.js\",\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"95630\",\"static/chunks/95630-79eb46537889cc8e.js\",\"31928\",\"static/chunks/31928-70a661b25895e6e5.js\",\"57875\",\"static/chunks/57875-6ef202f3cf7ed091.js\",\"37742\",\"static/chunks/37742-88327bccd3a920a3.js\",\"89329\",\"static/chunks/89329-9fb50cc5122e0593.js\",\"4228\",\"static/chunks/4228-aa6df1d124ddc104.js\",\"57220\",\"static/chunks/57220-cf287f77ab9c74d5.js\",\"21108\",\"static/chunks/21108-cc5726b6af4c34af.js\",\"7177\",\"static/chunks/app/layout-99e4f0c15c502077.js\"],\"ThemeProvider\"]\n4:I[75662,[\"99386\",\"static/chunks/7d384bb9-0ffedcc6b53f3e73.js\",\"803\",\"static/chunks/cd24890f-ec7b64c510add751.js\",\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"95630\",\"static/chunks/95630-79eb46537889cc8e.js\",\"31928\",\"static/chunks/31928-70a661b25895e6e5.js\",\"57875\",\"static/chunks/57875-6ef202f3cf7ed091.js\",\"37742\",\"static/chunks/37742-88327bccd3a920a3.js\",\"89329\",\"static/chunks/89329-9fb50cc5122e0593.js\",\"4228\",\"static/chunks/4228-aa6df1d124ddc104.js\",\"57220\",\"static/chunks/57220-cf287f77ab9c74d5.js\",\"21108\",\"static/chunks/21108-cc5726b6af4c34af.js\",\"7177\",\"static/chunks/app/layout-99e4f0c15c502077.js\"],\"SessionProvider\"]\n5:I[76868,[\"99386\",\"static/chunks/7d384bb9-0ffedcc6b53f3e73.js\",\"803\",\"static/chunks/cd24890f-ec7b64c510add751.js\",\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"95630\",\"static/chunks/95630-79eb46537889cc8e.js\",\"31928\",\"static/chunks/31928-70a661b25895e6e5.js\",\"57875\",\"static/chunks/57875-6ef202f3cf7ed091.js\",\"37742\",\"static/chunks/37742-88327bccd3a920a3.js\",\"89329\",\"static/chunks/89329-9fb50cc5122e0593.js\",\"4228\",\"static/chunks/4228-aa6df1d124ddc104.js\",\"57220\",\"static/chunks/57220-cf287f77ab9c74d5.js\",\"21108\",\"static/chunks/21108-cc5726b6af4c34af.js\",\"7177\",\"static/chunks/app/layout-99e4f0c15c502077.js\"],\"ApolloWrapper\"]\n6:I[87555,[],\"\"]\n7:I[31295,[],\"\"]\n8:I[76479,[\"99386\",\"static/chunks/7d384bb9-0ffedcc6b53f3e73.js\",\"803\",\"static/chunks/cd24890f-ec7b64c510add751.js\",\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"95630\",\"static/chunks/95630-79eb46537889cc8e.js\",\"31928\",\"static/chunks/31928-70a661b25895e6e5.js\",\"57875\",\"static/chunks/57875-6ef202f3cf7ed091.js\",\"37742\",\"static/chunks/37742-88327bccd3a920a3.js\",\"89329\",\"static/chunks/89329-9fb50cc5122e0593.js\",\"4228\",\"static/chunks/4228-aa6df1d124ddc104.js\",\"57220\",\"static/chunks/57220-cf287f77ab9c74d5.js\",\"21108\",\"static/chunks/21108-cc5726b6af4c34af.js\",\"7177\",\"static/chunks/app/layout-99e4f0c15c502077.js\"],\"WelcomeModalGate\"]\n9:I[81397,[\"99386\",\"static/chunks/7d384bb9-0ffedcc6b53f3e73.js\",\"803\",\"static/chunks/cd24890f-ec7b64c510add751.js\",\"140"])</script><script>self.__next_f.push([1,"81\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"95630\",\"static/chunks/95630-79eb46537889cc8e.js\",\"31928\",\"static/chunks/31928-70a661b25895e6e5.js\",\"57875\",\"static/chunks/57875-6ef202f3cf7ed091.js\",\"37742\",\"static/chunks/37742-88327bccd3a920a3.js\",\"89329\",\"static/chunks/89329-9fb50cc5122e0593.js\",\"4228\",\"static/chunks/4228-aa6df1d124ddc104.js\",\"57220\",\"static/chunks/57220-cf287f77ab9c74d5.js\",\"21108\",\"static/chunks/21108-cc5726b6af4c34af.js\",\"7177\",\"static/chunks/app/layout-99e4f0c15c502077.js\"],\"Toaster\"]\na:I[69243,[\"99386\",\"static/chunks/7d384bb9-0ffedcc6b53f3e73.js\",\"803\",\"static/chunks/cd24890f-ec7b64c510add751.js\",\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"95630\",\"static/chunks/95630-79eb46537889cc8e.js\",\"31928\",\"static/chunks/31928-70a661b25895e6e5.js\",\"57875\",\"static/chunks/57875-6ef202f3cf7ed091.js\",\"37742\",\"static/chunks/37742-88327bccd3a920a3.js\",\"89329\",\"static/chunks/89329-9fb50cc5122e0593.js\",\"4228\",\"static/chunks/4228-aa6df1d124ddc104.js\",\"57220\",\"static/chunks/57220-cf287f77ab9c74d5.js\",\"21108\",\"static/chunks/21108-cc5726b6af4c34af.js\",\"7177\",\"static/chunks/app/layout-99e4f0c15c502077.js\"],\"\"]\nf:I[28393,[],\"\"]\n11:I[59665,[],\"OutletBoundary\"]\n13:I[74911,[],\"AsyncMetadataOutlet\"]\n15:I[59665,[],\"ViewportBoundary\"]\n17:I[59665,[],\"MetadataBoundary\"]\n18:\"$Sreact.suspense\"\n1a:I[15042,[\"99386\",\"static/chunks/7d384bb9-0ffedcc6b53f3e73.js\",\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"95630\",\"static/chunks/95630-79eb46537889cc8e.js\",\"31928\",\"static/chunks/31928-70a661b25895e6e5.js\",\"39526\",\"static/chunks/39526-1f72852a19518691.js\",\"81489\",\"static/chunks/81489-364437be73f42e0d.js\",\"57875\",\"static/chunks/57875-6ef202f3cf7ed091.js\",\"57220\",\"static/chunks/57220-cf287f77ab9c74d5.js\",\"21108\",\"static/chunks/21108-cc5726b6af4c34af.js\",\"15042\",\"static/chunks/15042-dde24db1fd73b409.js\",\"73317\",\"static/chunks/73317-ed887098e222ed78.js\",\"98450\",\"static/chunks/app/%5Blocale%5D/layout-8f83607456863de9.js\"],\"Navbar\"]\n1b:I[41072,[\"99386\",\"static/chunks/7d384bb9-0ffedcc6b53f3e73.js\",\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"95630\",\"static/chunks/95630-79eb46537889cc8e.js\",\"31928\",\"static/chunks/31928-70a661b25895e6e5.js\",\"39526\",\"static/chunks/39526-1f72852a19518691.js\",\"81489\",\"static/chunks/81489-364437be73f42e0d.js\",\"57875\",\"static/chunks/57875-6ef202f3cf7ed091.js\",\"57220\",\"static/chunks/57220-cf287f77ab9c74d5.js\",\"21108\",\"static/chunks/21108-cc5726b6af4c34af.js\",\"15042\",\"static/chunks/15042-dde24db1fd73b409.js\",\"73317\",\"static/chunks/73317-ed887098e222ed78.js\",\"98450\",\"static/chunks/app/%5Blocale%5D/layout-8f83607456863de9.js\"],\"ConditionalFooter\"]\n1c:I[38175,[],\"IconMark\"]\n1d:I[94990,[\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"92442\",\"static/chunks/92442-3de83d30df656bfc.js\",\"55779\",\"static/chunks/app/%5Blocale%5D/docs/%5B...slug%5D/page-c80f2e665aa76894.js\"],\"DocContent\"]\n1f:I[47033,[\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"68679\",\"static/chunks/68679-e7d59f5e228a6339.js\",\"50794\",\"static/chunks/app/%5Blocale%5D/docs/layout-26dae23ceeeccbd5.js\"],\"SidebarWithPath\"]\n20:I[87086,[\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"68679\",\"static/chunks/68679-e7d59f5e228a6339.js\",\"50794\",\"static/chunks/app/%5Blocale%5D/docs/lay"])</script><script>self.__next_f.push([1,"out-26dae23ceeeccbd5.js\"],\"DocsScrollHandler\"]\n24:I[12415,[\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"68679\",\"static/chunks/68679-e7d59f5e228a6339.js\",\"50794\",\"static/chunks/app/%5Blocale%5D/docs/layout-26dae23ceeeccbd5.js\"],\"PageNavigation\"]\n25:I[79188,[\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"61337\",\"static/chunks/61337-fe5b1b874c13fe78.js\",\"68679\",\"static/chunks/68679-e7d59f5e228a6339.js\",\"50794\",\"static/chunks/app/%5Blocale%5D/docs/layout-26dae23ceeeccbd5.js\"],\"MobileSectionSelector\"]\n26:I[73005,[\"14081\",\"static/chunks/14081-3a328a513f1860b8.js\",\"66766\",\"static/chunks/66766-93aa4a3d196b6d8b.js\",\"6874\",\"static/chunks/6874-5100f18710e9cb3f.js\",\"92442\",\"static/chunks/92442-3de83d30df656bfc.js\",\"55779\",\"static/chunks/app/%5Blocale%5D/docs/%5B...slug%5D/page-c80f2e665aa76894.js\"],\"MDXClientRenderer\",1]\n:HL[\"/_next/static/media/1dcb4bb6f2068eb9-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/569ce4b8f30dc480-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/5ed273b77d2a1951-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/62a211a97b43f624-s.p.otf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/otf\"}]\n:HL[\"/_next/static/media/7cba1811e3c25a15-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/93f479601ee12b01-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/a67ad81cd994aeef-s.p.otf\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/otf\"}]\n:HL[\"/_next/static/media/ab86f138d0d6e9da-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/media/c7f848bed9dd25a3-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/879b7432ada67782.css\",\"style\"]\n:HL[\"/_next/static/css/a3a846aeba500629.css\",\"style\"]\n0:{\"P\":null,\"b\":\"k9ZjP1rofgrjVPLyCTqVV\",\"p\":\"\",\"c\":[\"\",\"en\",\"docs\",\"developers\",\"platform\",\"web-search\"],\"i\":false,\"f\":[[[\"\",{\"children\":[[\"locale\",\"en\",\"d\"],{\"children\":[\"docs\",{\"children\":[[\"slug\",\"developers/platform/web-search\",\"c\"],{\"children\":[\"__PAGE__\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/879b7432ada67782.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/a3a846aeba500629.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"className\":\"dark __variable_bc0dcf __variable_d28b19 __variable_017788 __variable_2d00a0 __variable_7c1658 __variable_f2a38a __variable_5cfdac __variable_9a8899\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased bg-background font-sans\",\"children\":[[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"disableTransitionOnChange\":true,\"children\":[\"$\",\"$L4\",null,{\"children\":[\"$\",\"$L5\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"relative flex min-h-screen flex-col\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,"])</script><script>self.__next_f.push([1,"255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L8\",null,{}],[\"$\",\"$L9\",null,{}]]}]}]}]}],[\"$\",\"$La\",null,{\"id\":\"structured-data-organization\",\"type\":\"application/ld+json\",\"children\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"Organization\\\",\\\"name\\\":\\\"NullShot\\\",\\\"url\\\":\\\"https://nullshot.ai\\\",\\\"description\\\":\\\"Build The Future Together. Join the future of AI and Web3 innovation with our community-driven platform for decentralized AI governance and collaborative development.\\\",\\\"logo\\\":\\\"https://nullshot.ai/icon.svg\\\",\\\"sameAs\\\":[\\\"https://twitter.com/nullshot_ai\\\",\\\"https://github.com/nullshot\\\"],\\\"contactPoint\\\":{\\\"@type\\\":\\\"ContactPoint\\\",\\\"contactType\\\":\\\"customer service\\\",\\\"url\\\":\\\"https://nullshot.ai\\\"}}\"}],[\"$\",\"$La\",null,{\"id\":\"structured-data-website\",\"type\":\"application/ld+json\",\"children\":\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"WebSite\\\",\\\"name\\\":\\\"NullShot\\\",\\\"url\\\":\\\"https://nullshot.ai\\\",\\\"description\\\":\\\"Build The Future Together. Join the future of AI and Web3 innovation with our community-driven platform for decentralized AI governance and collaborative development.\\\",\\\"publisher\\\":{\\\"@type\\\":\\\"Organization\\\",\\\"name\\\":\\\"NullShot\\\"},\\\"potentialAction\\\":{\\\"@type\\\":\\\"SearchAction\\\",\\\"target\\\":{\\\"@type\\\":\\\"EntryPoint\\\",\\\"urlTemplate\\\":\\\"https://nullshot.ai/search?q={search_term_string}\\\"},\\\"query-input\\\":\\\"required name=search_term_string\\\"}}\"}]]}]}]]}],{\"children\":[[\"locale\",\"en\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,\"$Lb\"]}],{\"children\":[\"docs\",[\"$\",\"$1\",\"c\",{\"children\":[null,\"$Lc\"]}],{\"children\":[[\"slug\",\"developers/platform/web-search\",\"c\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",\"$Ld\",{},null,false]},null,false]},null,false]},null,false]},null,false],\"$Le\",false]],\"m\":\"$undefined\",\"G\":[\"$f\",[]],\"s\":false,\"S\":false}\nd:[\"$\",\"$1\",\"c\",{\"children\":[\"$L10\",null,[\"$\",\"$L11\",null,{\"children\":[\"$L12\",[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]]}]]}]\ne:[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$L15\",null,{\"children\":\"$L16\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]],[\"$\",\"$L17\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$18\",null,{\"fallback\":null,\"children\":\"$L19\"}]}]}]]}]\nb:[\"$\",\"div\",null,{\"className\":\"relative flex min-h-screen flex-col\",\"children\":[[\"$\",\"$L1a\",null,{\"locale\":\"en\"}],[\"$\",\"main\",null,{\"className\":\"flex-1\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L1b\",null,{\"locale\":\"en\"}]]}]\n16:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n12:null\n14:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Browser Rendering | NullShot\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Web scraping and content extraction using browser automation for agents\"}],[\"$\",\"meta\",\"2\",{\"name\":\"application-name\",\"content\":\"NullShot\"}],[\"$\",\"meta\",\"3\",{\"name\":\"author\",\"content\":\"NullShot Team\"}],[\"$\",\"link\",\"4\",{\"rel\":\"manifest\",\"href\":\"/manifest.json\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"meta\",\"5\",{\"name\":\"referrer\",\"content\":\"origin-when-cross-origin\"}],[\"$\",\"meta\",\"6\",{\"name\":\"creator\",\""])</script><script>self.__next_f.push([1,"content\":\"NullShot\"}],[\"$\",\"meta\",\"7\",{\"name\":\"publisher\",\"content\":\"NullShot\"}],[\"$\",\"meta\",\"8\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"9\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"meta\",\"10\",{\"name\":\"category\",\"content\":\"Technology\"}],[\"$\",\"link\",\"11\",{\"rel\":\"canonical\",\"href\":\"https://nullshot.ai/en/docs/developers/platform/web-search\"}],[\"$\",\"link\",\"12\",{\"rel\":\"alternate\",\"hrefLang\":\"en\",\"href\":\"https://nullshot.ai/en/docs/developers/platform/web-search\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:title\",\"content\":\"Browser Rendering\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:description\",\"content\":\"Web scraping and content extraction using browser automation for agents\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:url\",\"content\":\"https://nullshot.ai/en/docs/developers/platform/web-search\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:site_name\",\"content\":\"Platform Documentation\"}],[\"$\",\"meta\",\"17\",{\"property\":\"og:locale\",\"content\":\"en\"}],[\"$\",\"meta\",\"18\",{\"property\":\"og:image\",\"content\":\"https://nullshot.ai/images/og-image.png\"}],[\"$\",\"meta\",\"19\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"20\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"21\",{\"property\":\"og:image:alt\",\"content\":\"Browser Rendering\"}],[\"$\",\"meta\",\"22\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"23\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"24\",{\"name\":\"twitter:title\",\"content\":\"Browser Rendering\"}],[\"$\",\"meta\",\"25\",{\"name\":\"twitter:description\",\"content\":\"Web scraping and content extraction using browser automation for agents\"}],[\"$\",\"meta\",\"26\",{\"name\":\"twitter:image\",\"content\":\"https://nullshot.ai/images/og-image.png\"}],[\"$\",\"link\",\"27\",{\"rel\":\"icon\",\"href\":\"/icon.svg?423bbdeb1a002565\",\"type\":\"image/svg+xml\",\"sizes\":\"any\"}],[\"$\",\"$L1c\",\"28\",{}]],\"error\":null,\"digest\":\"$undefined\"}\n19:\"$14:metadata\"\n10:[\"$\",\"$L1d\",null,{\"title\":\"Browser Rendering\",\"lastUpdated\":\"$undefined\",\"prevDoc\":{\"title\":\"Storage (R2/S3)\",\"href\":\"/en/docs/developers/platform/storage\"},\"nextDoc\":{\"title\":\"Workflows\",\"href\":\"/en/docs/developers/platform/workflows\"},\"previewNote\":\"$undefined\",\"children\":\"$L1e\"}]\nc:[[\"$\",\"div\",null,{\"className\":\"hidden md:flex h-screen bg-[#16171A] pt-16\",\"children\":[[\"$\",\"div\",null,{\"className\":\"w-64 border-r border-white/10 bg-[#16171A] flex-shrink-0 sticky top-16 h-[calc(100vh-4rem)] overflow-y-auto scrollbar-hide\",\"children\":[\"$\",\"$L1f\",null,{\"docsConfig\":[{\"title\":\"Introduction\",\"items\":[{\"title\":\"Overview\",\"href\":\"/docs/introduction/overview\",\"hasStandalonePage\":true,\"isExpandableOnly\":false},{\"title\":\"Concepts\",\"href\":\"/docs/introduction/concepts\",\"hasStandalonePage\":false,\"isExpandableOnly\":true,\"items\":[{\"title\":\"Agents\",\"href\":\"/docs/introduction/concepts/agents\"},{\"title\":\"AI MCP Tools\",\"href\":\"/docs/introduction/concepts/tools\"},{\"title\":\"Brainstorm\",\"href\":\"/docs/introduction/concepts/brainstorm\"}]}]},{\"title\":\"Protocol\",\"items\":[{\"title\":\"Overview\",\"href\":\"/docs/protocol/overview\",\"hasStandalonePage\":true,\"isExpandableOnly\":false},{\"title\":\"Chains\",\"href\":\"/docs/protocol/chains\",\"hasStandalonePage\":true,\"isExpandableOnly\":false},{\"title\":\"XAVA DAO\",\"href\":\"/docs/protocol/xava\",\"hasStandalonePage\":true,\"isExpandableOnly\":false}]},{\"title\":\"Developers\",\"items\":[{\"title\":\"Platform\",\"href\":\"/docs/developers/platform/overview\",\"hasStandalonePage\":true,\"isExpandableOnly\":false,\"items\":[{\"title\":\"Overview\",\"href\":\"/docs/developers/platform/overview\"},{\"title\":\"Analytics Engine\",\"href\":\"/docs/developers/platform/analytics-engine\"},{\"title\":\"Cache\",\"href\":\"/docs/developers/platform/cache\"},{\"title\":\"Environment Variables\",\"href\":\"/docs/developers/platform/environment-variables\"},{\"title\":\"Memory Store (KV)\",\"href\":\"/docs/developers/platform/memory-store\"},{\"title\":\"Queues\",\"href\":\"/docs/developers/platform/queues\"},{\"title\":\"Secret Manager\",\"href\":\"/docs/developers/platform/secret-manager\"},{\"title\":\"Storage (R2/S3)\",\"href\":\"/docs/developers/platform/storage\"},{\"title\":\"Browser Rendering\",\"href\":\"/docs/developers/plat"])</script><script>self.__next_f.push([1,"form/web-search\"},{\"title\":\"Workflows\",\"href\":\"/docs/developers/platform/workflows\"},{\"title\":\"SQL Database\",\"href\":\"/docs/developers/platform/d1-database\"},{\"title\":\"Vectorize\",\"href\":\"/docs/developers/platform/vectorize\"}]},{\"title\":\"Agents Framework\",\"href\":\"/docs/developers/agents-framework/overview\",\"hasStandalonePage\":true,\"isExpandableOnly\":false,\"items\":[{\"title\":\"Overview\",\"href\":\"/docs/developers/agents-framework/overview\"},{\"title\":\"Getting Started\",\"href\":\"/docs/developers/agents-framework/getting-started\"},{\"title\":\"Sessions\",\"href\":\"/docs/developers/agents-framework/sessions\"},{\"title\":\"Middleware\",\"href\":\"/docs/developers/agents-framework/middleware\"},{\"title\":\"Agent SDK\",\"href\":\"/docs/developers/agents-framework/agent-sdk\"},{\"title\":\"Vercel AI SDK\",\"href\":\"/docs/developers/agents-framework/ai-sdk\"},{\"title\":\"ElizaOS Integration\",\"href\":\"/docs/developers/agents-framework/elizaos\"}]},{\"title\":\"Command Line\",\"href\":\"/docs/developers/command-line/overview\",\"hasStandalonePage\":true,\"isExpandableOnly\":false,\"items\":[{\"title\":\"Overview\",\"href\":\"/docs/developers/command-line/overview\"}]},{\"title\":\"Mcp Framework\",\"href\":\"/docs/developers/mcp-framework/overview\",\"hasStandalonePage\":true,\"isExpandableOnly\":false,\"items\":[{\"title\":\"Overview\",\"href\":\"/docs/developers/mcp-framework/overview\"},{\"title\":\"Getting Started\",\"href\":\"/docs/developers/mcp-framework/getting-started\"},{\"title\":\"TODO List Example\",\"href\":\"/docs/developers/mcp-framework/todo-example\"},{\"title\":\"Integration Testing\",\"href\":\"/docs/developers/mcp-framework/integration-testing\"}]},{\"title\":\"Services\",\"href\":\"/docs/developers/services/overview\",\"hasStandalonePage\":true,\"isExpandableOnly\":false,\"items\":[{\"title\":\"Overview\",\"href\":\"/docs/developers/services/overview\"},{\"title\":\"Toolbox Service\",\"href\":\"/docs/developers/services/toolbox\"},{\"title\":\"External Services\",\"href\":\"/docs/developers/services/external-services\"}]},{\"title\":\"Playground\",\"href\":\"/docs/developers/playground\",\"hasStandalonePage\":true,\"isExpandableOnly\":false}]}]}]}],[\"$\",\"div\",null,{\"id\":\"docs-main-content\",\"className\":\"flex-1 overflow-y-auto scrollbar-hide\",\"children\":[[\"$\",\"$L20\",null,{}],[\"$\",\"div\",null,{\"className\":\"min-h-screen\",\"children\":[\"$\",\"$L6\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":\"$L21\",\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}],\"$L22\"]}],\"$L23\"]\n21:[\"$\",\"$L7\",null,{}]\n22:[\"$\",\"div\",null,{\"className\":\"w-64 border-l border-white/10 bg-[#16171A] flex-shrink-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"sticky top-0 h-screen overflow-y-auto scrollbar-hide\",\"children\":[\"$\",\"$L24\",null,{}]}]}]\n23:[\"$\",\"div\",null,{\"className\":\"md:hidden bg-[#14161D] min-h-screen pt-16\",\"children\":[\"$\",\"div\",null,{\"id\":\"docs-main-content-mobile\",\"className\":\"overflow-y-auto\",\"children\":[[\"$\",\"$L20\",null,{}],[\"$\",\"$L25\",null,{\"docsConfig\":\"$c:0:props:children:0:props:children:props:docsConfig\"}],\"$c:0:props:children:1:props:children:1:props:children\"]}]}]\n1e:[\"$\",\"$L26\",null,{\"slug\":[\"developers\",\"platform\",\"web-search\"],\"locale\":\"en\"}]\n"])</script><script id="structured-data-organization" type="application/ld+json" data-nscript="afterInteractive">{"@context":"https://schema.org","@type":"Organization","name":"NullShot","url":"https://nullshot.ai","description":"Build The Future Together. Join the future of AI and Web3 innovation with our community-driven platform for decentralized AI governance and collaborative development.","logo":"https://nullshot.ai/icon.svg","sameAs":["https://twitter.com/nullshot_ai","https://github.com/nullshot"],"contactPoint":{"@type":"ContactPoint","contactType":"customer service","url":"https://nullshot.ai"}}</script><script id="structured-data-website" type="application/ld+json" data-nscript="afterInteractive">{"@context":"https://schema.org","@type":"WebSite","name":"NullShot","url":"https://nullshot.ai","description":"Build The Future Together. Join the future of AI and Web3 innovation with our community-driven platform for decentralized AI governance and collaborative development.","publisher":{"@type":"Organization","name":"NullShot"},"potentialAction":{"@type":"SearchAction","target":{"@type":"EntryPoint","urlTemplate":"https://nullshot.ai/search?q={search_term_string}"},"query-input":"required name=search_term_string"}}</script><next-route-announcer style="position: absolute;"><template shadowrootmode="open"><div aria-live="assertive" id="__next-route-announcer__" role="alert" style="position: absolute; border: 0px; height: 1px; margin: -1px; padding: 0px; width: 1px; clip: rect(0px, 0px, 0px, 0px); overflow: hidden; white-space: nowrap; overflow-wrap: normal;"></div></template></next-route-announcer></body></html>